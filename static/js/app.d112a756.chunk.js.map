{"version":3,"sources":["D2App/pages/JobList/JobList.module.css","D2App/components/FormErrorBox/FormErrorBox.module.css","D2App/components/FormFields/ParameterFields.module.css","D2App/components/Forms/JobForm.module.css","D2App/pages/JobEdit/JobEdit.module.css","D2App/pages/JobAdd/JobAdd.module.css","D2App/components/PageWrapper/PageWrapper.module.css","D2App/hooks/locale/selectors.js","D2App/hooks/locale/locale.js","D2App/components/Context/RefetchJobs.js","D2App/components/Context/Locale.js","D2App/components/AuthWall/selectors.js","D2App/components/AuthWall/AuthWall.js","D2App/pages/JobList/selectors.js","D2App/services/history/history.js","D2App/services/history/index.js","D2App/services/server-translations/jobTypesMap.js","D2App/services/server-translations/jobStatusMap.js","D2App/components/Switches/ToggleJobSwitch.js","D2App/pages/JobList/EditJobMenuItem.js","D2App/components/Modal/CronPresetModal.js","D2App/components/Modal/DeleteJobModal.js","D2App/components/Modal/DiscardFormModal.js","D2App/components/Modal/RunJobModal.js","D2App/pages/JobList/RunJobMenuItem.js","D2App/pages/JobList/DeleteJobMenuItem.js","D2App/pages/JobList/JobListActions.js","D2App/pages/JobList/JobStatus.js","D2App/pages/JobList/JobNextRun.js","D2App/services/validators/validate-cron.js","D2App/services/validators/required-cron.js","D2App/hooks/human-readable-cron/use-human-readable-cron.js","D2App/components/Cron/HumanReadableCron.js","D2App/pages/JobList/JobSchedule.js","D2App/pages/JobList/JobListTableItem.js","D2App/pages/JobList/JobListTable.js","D2App/pages/JobList/JobList.js","D2App/pages/JobList/JobListContainer.js","D2App/components/Buttons/CronPresetButton.js","D2App/components/Buttons/DiscardFormButton.js","D2App/services/format-error/format-error.js","D2App/services/format-error/index.js","D2App/hooks/jobs/use-submit-job.js","D2App/hooks/jobs/use-update-job.js","D2App/components/FormErrorBox/FormErrorBox.js","D2App/components/FormFields/JobNameField.js","D2App/components/FormFields/JobTypeField.js","D2App/components/FormFields/selectors.js","D2App/components/FormFields/UnlabeledOptionsField.js","D2App/components/FormFields/LabeledOptionsField.js","D2App/components/FormFields/ParameterFields.js","D2App/components/FormFields/CronField.js","D2App/components/FormFields/DelayField.js","D2App/components/FormFields/ScheduleField.js","D2App/components/FormFields/index.js","D2App/components/Forms/JobForm.js","D2App/components/Forms/JobAddFormContainer.js","D2App/components/Forms/JobEditFormContainer.js","D2App/pages/JobEdit/JobEdit.js","D2App/pages/JobEdit/JobEditContainer.js","D2App/pages/JobAdd/JobAdd.js","D2App/pages/JobAdd/JobAddContainer.js","D2App/pages/NotAuthorized/NotAuthorized.js","D2App/components/Routes/Routes.js","D2App/components/PageWrapper/PageWrapper.js","D2App/components/App/App.js","D2App/components/App/index.js"],"names":["module","exports","query","userSettings","resource","useLocale","loading","error","data","useDataQuery","keyUiLocale","getLocale","RefetchJobsContext","createContext","Error","LocaleContext","me","node","PropTypes","AuthWall","children","i18n","t","authorities","includes","getAuthorized","Fragment","push","to","getEntities","jobs","reduce","entities","job","id","getIds","map","history","createHashHistory","jobTypesMap","ANALYTICS_TABLE","CONTINUOUS_ANALYTICS_TABLE","CREDENTIALS_EXPIRY_ALERT","DATA_INTEGRITY","DATA_SET_NOTIFICATION","DATA_STATISTICS","DATA_SYNC","EVENT_PROGRAMS_DATA_SYNC","FILE_RESOURCE_CLEANUP","META_DATA_SYNC","MONITORING","PREDICTOR","PROGRAM_NOTIFICATIONS","PUSH_ANALYSIS","REMOVE_EXPIRED_RESERVED_VALUES","RESOURCE_TABLE","SEND_SCHEDULED_MESSAGE","TRACKER_PROGRAMS_DATA_SYNC","VALIDATION_RESULTS_NOTIFICATION","jobStatusMap","DISABLED","DONE","FAILED","NOT_STARTED","RUNNING","SCHEDULED","STOPPED","mutation","type","partial","enabled","bool","string","ToggleJobSwitch","checked","toggleJob","useDataMutation","refetch","useContext","name","disabled","onChange","then","EditJobMenuItem","dense","onClick","label","cronPresets","value","func","CronPresetModal","setCron","hideModal","currentPreset","setCurrentPreset","useState","open","small","onClose","preset","key","end","secondary","primary","DeleteJobModal","deleteJob","destructive","DiscardFormModal","RunJobModal","engine","useDataEngine","RunJobMenuItem","showModal","setShowModal","DeleteJobMenuItem","JobListActions","configurable","component","defaultProps","JobStatus","status","neutral","negative","positive","JobNextRun","nextExecutionTime","now","moment","Date","nextRun","utc","isSameOrBefore","propTypes","isRequired","WEEKDAYS","MONTHS","isValidNumber","number","x","y","isWildcard","field","isUndefined","isValidWithinRange","range","boundaries","split","length","isValidNumberRange","fraction","components","isValidFraction","isValidMonthField","months","firstMonth","secondMonth","m","indexOf","undefined","isAlphabeticMonth","isValidWeekdayField","weekdays","firstDay","secondDay","c","isAlphabeticWeekday","validateCron","exp","fields","trim","isValidFields","isValidMinuteField","isValidHourField","isValidDayField","requiredCron","useHumanReadableCron","cronExpression","locale","isValid","cronstrue","toString","HumanReadableCron","JobSchedule","schedulingType","delay","shape","JobListTableItem","displayName","jobType","jobStatus","object","arrayOf","JobListTable","jobIds","jobEntities","JobList","isLoading","showSystemJobs","setShowSystemJobs","jobFilter","setJobFilter","className","styles","header","headerTitle","controlContainer","dataTest","placeholder","controlRight","params","paging","JobListContainer","jobConfigurations","filteredJobs","filter","toLowerCase","getJobsMatchingFilter","getUserJobs","RefetchJobs","Provider","CronPresetButton","DiscardFormButton","shouldConfirm","FORM_ERROR","FinalForm","formatError","details","response","validationErrors","genericErrors","errorReports","forEach","report","errorProperty","message","useSubmitJob","mutate","variables","catch","useUpdateJob","array","FormErrorBox","submitError","title","list","Field","ReactFinalForm","VALIDATOR","composeValidators","hasValue","JobNameField","InputFieldFF","validate","required","jobTypes","JobTypeField","loadingText","options","SingleSelectFieldFF","getJobTypeObject","find","getStringValue","UnlabeledOptionsField","endpoint","helpText","option","MultiSelectFieldFF","LabeledOptionsField","parameterName","ParameterFields","parameters","selectedJobType","jobParameters","getJobTypeParameters","parameterComponents","fieldName","klass","relativeApiEndpoint","startsWith","slice","getParameterEndpoint","parameterComponent","SwitchFieldFF","format","marginTop","useFormState","useForm","CronField","form","values","subscription","cron","change","integer","createNumberRange","DelayField","LOWERBOUND","UPPERBOUND","ScheduleField","fieldNames","JobForm","handleSubmit","pristine","submitting","hasSubmitErrors","setIsPristine","subscribe","useEffect","Spinner","onSubmit","maxWidth","formButtonContainer","icon","saveButton","Form","JobAddFormContainer","submitJob","destroyOnUnregister","join","JobEditFormContainer","useParams","updateJob","initialValues","JobEdit","isPristine","JOBNAME","pageHeader","pageHeaderButton","pageHeaderTitle","nsSeparator","card","cardHeader","cardHeaderTitle","href","cardHeaderLink","cardHeaderInfo","JobEditContainer","JobAdd","target","rel","JobAddContainer","NotAuthorized","Routes","exact","path","PageWrapper","wrapper","App","Locale","spacers","colors"],"mappings":"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","file":"static/js/app.d112a756.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"JobList_header__23tFt\",\"headerTitle\":\"JobList_headerTitle__21D__\",\"controlContainer\":\"JobList_controlContainer__3Yzj_\",\"controlRight\":\"JobList_controlRight__38lfB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"list\":\"FormErrorBox_list__3BejY\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"headerTitle\":\"ParameterFields_headerTitle__IBF76\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"formButtonContainer\":\"JobForm_formButtonContainer__1odlw\",\"saveButton\":\"JobForm_saveButton__kZLTb\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"pageHeader\":\"JobEdit_pageHeader__3Fywp\",\"pageHeaderButton\":\"JobEdit_pageHeaderButton__29yjJ\",\"pageHeaderTitle\":\"JobEdit_pageHeaderTitle__jZrIG\",\"card\":\"JobEdit_card__2QqEg\",\"cardHeader\":\"JobEdit_cardHeader__Mv_cj\",\"cardHeaderTitle\":\"JobEdit_cardHeaderTitle__29Y64\",\"cardHeaderInfo\":\"JobEdit_cardHeaderInfo__3VWZt\",\"cardHeaderLink\":\"JobEdit_cardHeaderLink__2frj7\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"pageHeader\":\"JobAdd_pageHeader__2NZzc\",\"pageHeaderButton\":\"JobAdd_pageHeaderButton__Xg_R9\",\"pageHeaderTitle\":\"JobAdd_pageHeaderTitle__1RMl0\",\"card\":\"JobAdd_card__1HH6H\",\"cardHeader\":\"JobAdd_cardHeader__1D3sS\",\"cardHeaderTitle\":\"JobAdd_cardHeaderTitle__2TG9a\",\"cardHeaderInfo\":\"JobAdd_cardHeaderInfo__vq_Y1\",\"cardHeaderLink\":\"JobAdd_cardHeaderLink__2CzPt\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"PageWrapper_wrapper__t-CJy\"};","export const getLocale = data => {\n  const {\n    keyUiLocale\n  } = data;\n\n  if (!keyUiLocale) {\n    return '';\n  }\n\n  return keyUiLocale;\n};","import { useDataQuery } from '@dhis2/app-runtime';\nimport { getLocale } from './selectors';\nconst fallback = 'en';\nconst query = {\n  userSettings: {\n    resource: 'userSettings'\n  }\n};\n\nconst useLocale = () => {\n  const {\n    loading,\n    error,\n    data\n  } = useDataQuery(query);\n\n  if (loading) {\n    return '';\n  } // Fall back to 'en' in case of errors\n\n\n  if (error) {\n    return fallback;\n  }\n\n  return getLocale(data.userSettings) || fallback;\n};\n\nexport default useLocale;","import { createContext } from 'react';\nconst message = 'RefetchJobsContext consumer needs to have a valid Provider as parent'; // Throws an error if the consumer is not nested in a provider\n\nconst RefetchJobsContext = createContext(() => {\n  throw new Error(message);\n});\nexport default RefetchJobsContext;","import { createContext } from 'react';\nconst LocaleContext = createContext('');\nexport default LocaleContext;","export const getAuthorized = me => {\n  const {\n    authorities\n  } = me;\n\n  if (!authorities) {\n    return false;\n  }\n\n  const isAuthorized = authorities.includes('ALL') || authorities.includes('F_SCHEDULING_ADMIN');\n  return isAuthorized;\n};","import React from 'react';\nimport { PropTypes } from '@dhis2/prop-types';\nimport { Redirect } from 'react-router-dom';\nimport { CircularLoader, Layer, CenteredContent } from '@dhis2/ui';\nimport i18n from '@dhis2/d2-i18n';\nimport { useDataQuery } from '@dhis2/app-runtime';\nimport { getAuthorized } from './selectors';\nconst query = {\n  me: {\n    resource: 'me'\n  }\n};\n\nconst AuthWall = ({\n  children\n}) => {\n  const {\n    loading,\n    error,\n    data\n  } = useDataQuery(query);\n\n  if (loading) {\n    return <Layer>\n                <CenteredContent>\n                    <CircularLoader />\n                    {i18n.t('Checking permissions')}\n                </CenteredContent>\n            </Layer>;\n  }\n\n  if (error) {\n    /**\n     * The app can't continue if this fails, because it doesn't\n     * know if the user is authorized, so throw the error.\n     */\n    throw error;\n  }\n\n  const isAuthorized = getAuthorized(data.me);\n\n  if (!isAuthorized) {\n    return <Redirect push to=\"/notauthorized\" />;\n  }\n\n  return <React.Fragment>{children}</React.Fragment>;\n};\n\nconst {\n  node\n} = PropTypes;\nAuthWall.propTypes = {\n  children: node.isRequired\n};\nexport default AuthWall;","// Returns an object of jobs, indexed by their ids\nexport const getEntities = jobs => jobs.reduce((entities, job) => {\n  const id = job.id;\n  entities[id] = job;\n  return entities;\n}, {}); // Returns an array of job ids\n\nexport const getIds = jobs => jobs.map(job => job.id); // Returns jobs that can be configured by the user, which are user created jobs\n\nexport const getUserJobs = jobs => jobs.filter(job => job.configurable); // Returns jobs whose name matches (a part of) the filter, case insensitive\n\nexport const getJobsMatchingFilter = (jobs, filter) => jobs.filter(job => job.name.toLowerCase().includes(filter.toLowerCase()));","import { createHashHistory } from 'history';\nconst history = createHashHistory();\nexport default history;","import history from './history';\nexport default history;","import i18n from '@dhis2/d2-i18n';\nconst jobTypesMap = {\n  ANALYTICS_TABLE: i18n.t('Analytics table'),\n  CONTINUOUS_ANALYTICS_TABLE: i18n.t('Continuous analytics table'),\n  CREDENTIALS_EXPIRY_ALERT: i18n.t('Credentials expiry alert'),\n  DATA_INTEGRITY: i18n.t('Data integrity'),\n  DATA_SET_NOTIFICATION: i18n.t('Dataset notification'),\n  DATA_STATISTICS: i18n.t('Data statistics'),\n  DATA_SYNC: i18n.t('Data sync'),\n  EVENT_PROGRAMS_DATA_SYNC: i18n.t('Event programs data sync'),\n  FILE_RESOURCE_CLEANUP: i18n.t('File resource clean up'),\n  META_DATA_SYNC: i18n.t('Meta data sync'),\n  MONITORING: i18n.t('Monitoring'),\n  PREDICTOR: i18n.t('Predictor'),\n  PROGRAM_NOTIFICATIONS: i18n.t('Program notifications'),\n  PUSH_ANALYSIS: i18n.t('Push analysis'),\n  REMOVE_EXPIRED_RESERVED_VALUES: i18n.t('Remove expired reserved values'),\n  RESOURCE_TABLE: i18n.t('Resource table'),\n  SEND_SCHEDULED_MESSAGE: i18n.t('Send scheduled message'),\n  TRACKER_PROGRAMS_DATA_SYNC: i18n.t('Tracker programs data sync'),\n  VALIDATION_RESULTS_NOTIFICATION: i18n.t('Validation results notification')\n};\nexport default jobTypesMap;","import i18n from '@dhis2/d2-i18n';\nconst jobStatusMap = {\n  DISABLED: i18n.t('Disabled'),\n  DONE: i18n.t('Done'),\n  FAILED: i18n.t('Failed'),\n  NOT_STARTED: i18n.t('Not started'),\n  RUNNING: i18n.t('Running'),\n  SCHEDULED: i18n.t('Scheduled'),\n  STOPPED: i18n.t('Stopped')\n};\nexport default jobStatusMap;","import React, { useContext } from 'react';\nimport { PropTypes } from '@dhis2/prop-types';\nimport { Switch } from '@dhis2/ui';\nimport { useDataMutation } from '@dhis2/app-runtime';\nimport { RefetchJobsContext } from '../Context';\n/* istanbul ignore next */\n\nconst mutation = {\n  resource: 'jobConfigurations',\n  id: ({\n    id\n  }) => id,\n  type: 'update',\n  partial: true,\n  data: ({\n    enabled\n  }) => ({\n    enabled\n  })\n};\n\nconst ToggleJobSwitch = ({\n  id,\n  checked\n}) => {\n  const [toggleJob, {\n    loading\n  }] = useDataMutation(mutation);\n  const refetch = useContext(RefetchJobsContext);\n  const enabled = !checked;\n  return <Switch name={`toggle-job-${id}`} disabled={loading} checked={checked} onChange={() => {\n    toggleJob({\n      id,\n      enabled\n    }).then(() => refetch());\n  }} />;\n};\n\nconst {\n  bool,\n  string\n} = PropTypes;\nToggleJobSwitch.propTypes = {\n  checked: bool.isRequired,\n  id: string.isRequired\n};\nexport default ToggleJobSwitch;","import React from 'react';\nimport { PropTypes } from '@dhis2/prop-types';\nimport { MenuItem } from '@dhis2/ui';\nimport i18n from '@dhis2/d2-i18n';\nimport history from '../../services/history';\n\nconst EditJobMenuItem = ({\n  id\n}) => <MenuItem dense onClick={() => history.push(`/edit/${id}`)} label={i18n.t('Edit')} />;\n\nconst {\n  string\n} = PropTypes;\nEditJobMenuItem.propTypes = {\n  id: string.isRequired\n};\nexport default EditJobMenuItem;","import React, { useState } from 'react';\nimport { PropTypes } from '@dhis2/prop-types';\nimport { Button, Modal, ModalTitle, ModalContent, ModalActions, ButtonStrip, Radio } from '@dhis2/ui';\nimport i18n from '@dhis2/d2-i18n';\nconst cronPresets = [{\n  label: i18n.t('Every hour'),\n  value: '0 0 * ? * *'\n}, {\n  label: i18n.t('Every day at midnight'),\n  value: '0 0 1 ? * *'\n}, {\n  label: i18n.t('Every day at 3 am'),\n  value: '0 0 3 ? * *'\n}, {\n  label: i18n.t('Every day at noon'),\n  value: '0 0 12 ? * MON-FRI'\n}, {\n  label: i18n.t('Every week'),\n  value: '0 0 3 ? * MON'\n}];\n\nconst CronPresetModal = ({\n  setCron,\n  hideModal\n}) => {\n  const [currentPreset, setCurrentPreset] = useState('');\n  return <Modal open small onClose={hideModal}>\n            <ModalTitle>{i18n.t('Choose a preset time/interval')}</ModalTitle>\n            <ModalContent>\n                {cronPresets.map(preset => <Radio {...preset} checked={currentPreset === preset.value} key={preset.value} onChange={({\n        value\n      }) => setCurrentPreset(value)} />)}\n            </ModalContent>\n            <ModalActions>\n                <ButtonStrip end>\n                    <Button secondary onClick={hideModal} name=\"hide-modal\">\n                        {i18n.t('Cancel')}\n                    </Button>\n                    <Button primary name=\"insert-preset\" disabled={!currentPreset} onClick={() => {\n          hideModal();\n          setCron(currentPreset);\n        }}>\n                        {i18n.t('Insert preset')}\n                    </Button>\n                </ButtonStrip>\n            </ModalActions>\n        </Modal>;\n};\n\nconst {\n  func\n} = PropTypes;\nCronPresetModal.propTypes = {\n  hideModal: func.isRequired,\n  setCron: func.isRequired\n};\nexport default CronPresetModal;","import React, { useContext } from 'react';\nimport { PropTypes } from '@dhis2/prop-types';\nimport { Button, Modal, ModalContent, ModalActions, ButtonStrip } from '@dhis2/ui';\nimport i18n from '@dhis2/d2-i18n';\nimport { useDataMutation } from '@dhis2/app-runtime';\nimport { RefetchJobsContext } from '../Context';\nconst mutation = {\n  resource: 'jobConfigurations',\n  id:\n  /* istanbul ignore next */\n  ({\n    id\n  }) => id,\n  type: 'delete'\n};\n\nconst DeleteJobModal = ({\n  id,\n  hideModal\n}) => {\n  const [deleteJob] = useDataMutation(mutation);\n  const refetch = useContext(RefetchJobsContext);\n  return <Modal open small onClose={hideModal}>\n            <ModalContent>\n                {i18n.t('Are you sure you want to delete this job?')}\n            </ModalContent>\n            <ModalActions>\n                <ButtonStrip end>\n                    <Button name=\"hide-modal\" secondary onClick={hideModal}>\n                        {i18n.t('Cancel')}\n                    </Button>\n                    <Button name={`delete-job-${id}`} destructive onClick={() => {\n          deleteJob({\n            id\n          }).then(() => {\n            hideModal();\n            refetch();\n          });\n        }}>\n                        {i18n.t('Delete')}\n                    </Button>\n                </ButtonStrip>\n            </ModalActions>\n        </Modal>;\n};\n\nconst {\n  func,\n  string\n} = PropTypes;\nDeleteJobModal.propTypes = {\n  hideModal: func.isRequired,\n  id: string.isRequired\n};\nexport default DeleteJobModal;","import React from 'react';\nimport { PropTypes } from '@dhis2/prop-types';\nimport { Button, Modal, ModalContent, ModalActions, ButtonStrip } from '@dhis2/ui';\nimport i18n from '@dhis2/d2-i18n';\nimport history from '../../services/history';\n\nconst DiscardFormModal = ({\n  hideModal\n}) => <Modal open small onClose={hideModal}>\n        <ModalContent>\n            {i18n.t('Are you sure you want to discard this form?')}\n        </ModalContent>\n        <ModalActions>\n            <ButtonStrip end>\n                <Button name=\"cancel-discard-form\" secondary onClick={hideModal}>\n                    {i18n.t('Cancel')}\n                </Button>\n                <Button name=\"discard-form\" destructive onClick={() => {\n        hideModal();\n        history.push('/');\n      }}>\n                    {i18n.t('Discard')}\n                </Button>\n            </ButtonStrip>\n        </ModalActions>\n    </Modal>;\n\nconst {\n  func\n} = PropTypes;\nDiscardFormModal.propTypes = {\n  hideModal: func.isRequired\n};\nexport default DiscardFormModal;","import React, { useContext } from 'react';\nimport { PropTypes } from '@dhis2/prop-types';\nimport { useDataEngine } from '@dhis2/app-runtime';\nimport { Button, Modal, ModalContent, ModalActions, ButtonStrip } from '@dhis2/ui';\nimport i18n from '@dhis2/d2-i18n';\nimport { RefetchJobsContext } from '../Context';\n\nconst RunJobModal = ({\n  id,\n  hideModal\n}) => {\n  const engine = useDataEngine();\n  const query = {\n    jobs: {\n      resource: `jobConfigurations/${id}/execute`\n    }\n  };\n\n  const runJob = () => engine.query(query);\n\n  const refetch = useContext(RefetchJobsContext);\n  return <Modal open small onClose={hideModal}>\n            <ModalContent>\n                {i18n.t('Are you sure you want to run this job?')}\n            </ModalContent>\n            <ModalActions>\n                <ButtonStrip end>\n                    <Button name=\"hide-modal\" secondary onClick={hideModal}>\n                        {i18n.t('Cancel')}\n                    </Button>\n                    <Button name={`run-job-${id}`} primary onClick={() => {\n          runJob().then(() => {\n            hideModal();\n            refetch();\n          });\n        }}>\n                        {i18n.t('Run')}\n                    </Button>\n                </ButtonStrip>\n            </ModalActions>\n        </Modal>;\n};\n\nconst {\n  func,\n  string\n} = PropTypes;\nRunJobModal.propTypes = {\n  hideModal: func.isRequired,\n  id: string.isRequired\n};\nexport default RunJobModal;","import React, { useState } from 'react';\nimport { PropTypes } from '@dhis2/prop-types';\nimport { MenuItem } from '@dhis2/ui';\nimport i18n from '@dhis2/d2-i18n';\nimport { RunJobModal } from '../../components/Modal';\n\nconst RunJobMenuItem = ({\n  id\n}) => {\n  const [showModal, setShowModal] = useState(false);\n  return <React.Fragment>\n            <MenuItem dense onClick={() => {\n      setShowModal(true);\n    }} label={i18n.t('Run manually')} />\n            {showModal && <RunJobModal id={id} hideModal={\n    /* istanbul ignore next */\n    () => setShowModal(false)} />}\n        </React.Fragment>;\n};\n\nconst {\n  string\n} = PropTypes;\nRunJobMenuItem.propTypes = {\n  id: string.isRequired\n};\nexport default RunJobMenuItem;","import React, { useState } from 'react';\nimport { PropTypes } from '@dhis2/prop-types';\nimport { MenuItem } from '@dhis2/ui';\nimport i18n from '@dhis2/d2-i18n';\nimport { DeleteJobModal } from '../../components/Modal';\n\nconst DeleteJobMenuItem = ({\n  id\n}) => {\n  const [showModal, setShowModal] = useState(false);\n  return <React.Fragment>\n            <MenuItem dense destructive onClick={() => {\n      setShowModal(true);\n    }} label={i18n.t('Delete')} />\n            {showModal && <DeleteJobModal id={id} hideModal={\n    /* istanbul ignore next */\n    () => setShowModal(false)} />}\n        </React.Fragment>;\n};\n\nconst {\n  string\n} = PropTypes;\nDeleteJobMenuItem.propTypes = {\n  id: string.isRequired\n};\nexport default DeleteJobMenuItem;","import React from 'react';\nimport { PropTypes } from '@dhis2/prop-types';\nimport { FlyoutMenu, DropdownButton } from '@dhis2/ui';\nimport i18n from '@dhis2/d2-i18n';\nimport EditJobMenuItem from './EditJobMenuItem';\nimport RunJobMenuItem from './RunJobMenuItem';\nimport DeleteJobMenuItem from './DeleteJobMenuItem';\n\nconst JobListActions = ({\n  id,\n  configurable\n}) => <DropdownButton small component={<FlyoutMenu>\n                {configurable && <EditJobMenuItem id={id} />}\n                <RunJobMenuItem id={id} />\n                <DeleteJobMenuItem id={id} />\n            </FlyoutMenu>}>\n        {i18n.t('Actions')}\n    </DropdownButton>;\n\nJobListActions.defaultProps = {\n  configurable: false\n};\nconst {\n  string,\n  bool\n} = PropTypes;\nJobListActions.propTypes = {\n  id: string.isRequired,\n  configurable: bool\n};\nexport default JobListActions;","import React from 'react';\nimport { PropTypes } from '@dhis2/prop-types';\nimport { Tag } from '@dhis2/ui';\nimport { jobStatusMap } from '../../services/server-translations';\n\nconst JobStatus = ({\n  status\n}) => {\n  switch (status) {\n    case 'STOPPED':\n    case 'DISABLED':\n      return <Tag>{jobStatusMap[status]}</Tag>;\n\n    case 'RUNNING':\n    case 'NOT_STARTED':\n    case 'SCHEDULED':\n      return <Tag neutral>{jobStatusMap[status]}</Tag>;\n\n    case 'FAILED':\n      return <Tag negative>{jobStatusMap[status]}</Tag>;\n\n    case 'DONE':\n      return <Tag positive>{jobStatusMap[status]}</Tag>;\n    // Unrecognised status\n\n    default:\n      return null;\n  }\n};\n\nconst {\n  string\n} = PropTypes;\nJobStatus.propTypes = {\n  status: string.isRequired\n};\nexport default JobStatus;","import moment from 'moment';\nimport { PropTypes } from '@dhis2/prop-types';\nimport i18n from '@dhis2/d2-i18n';\n\nconst JobNextRun = ({\n  nextExecutionTime,\n  enabled\n}) => {\n  if (!enabled || !nextExecutionTime) {\n    return '-';\n  }\n\n  const now = moment(Date.now());\n  /**\n   * The recommendation is to run dhis2 on a server set to UTC time.\n   * In that case this timestamp is also UTC. If those recommendations\n   * weren't followed the time could be off, but there's nothing\n   * we can do to detect that.\n   */\n\n  const nextRun = moment.utc(nextExecutionTime);\n  const nextRunIsInPast = nextRun.isSameOrBefore(now, 'minute');\n  /**\n   * If the time is in the past, that could mean that the task is running,\n   * and the nextExecutionTime hasn't been updated yet.\n   */\n\n  if (nextRunIsInPast) {\n    return i18n.t('Not scheduled');\n  }\n\n  return now.to(nextRun);\n};\n\nconst {\n  bool,\n  string\n} = PropTypes;\nJobNextRun.propTypes = {\n  enabled: bool.isRequired,\n  nextExecutionTime: string\n};\nexport default JobNextRun;","const WEEKDAYS = ['MON', 'TUE', 'WED', 'THU', 'FRI', 'SAT', 'SUN'];\nconst MONTHS = ['JAN', 'FEB', 'MAR', 'APR', 'MAY', 'JUN', 'JUL', 'AUG', 'SEP', 'OCT', 'NOV', 'DEC'];\n\nconst isValidFields = fields => fields && fields.length === 6;\n\nconst isValidNumber = (number, x, y) => number >= x && number <= y;\n\nconst isWildcard = field => field === '*';\n\nconst isUndefined = field => field === '?';\n\nconst isValidNumberRange = (range, x, y) => {\n  const boundaries = range.split('-');\n  if (!boundaries || boundaries.length !== 2) return false;\n  return isValidNumber(boundaries[0], x, y) && isValidNumber(boundaries[1], x, y) && boundaries[0] <= boundaries[1];\n};\n\nconst isValidFraction = (fraction, x, y) => {\n  const components = fraction.split('/');\n  if (!components || components.length !== 2) return false;\n  /* istanbul ignore next */\n\n  return (isWildcard(components[0]) || isValidNumber(components[0], x, y)) && isValidNumber(components[1], x, y);\n};\n\nconst isAlphabeticWeekday = field => {\n  const weekdays = field.split('-');\n  const [firstDay, secondDay] = weekdays.map(c => WEEKDAYS.indexOf(c));\n  return firstDay !== -1 && secondDay === undefined || firstDay !== -1 && secondDay !== -1 && firstDay <= secondDay;\n};\n\nconst isAlphabeticMonth = field => {\n  const months = field.split('-');\n  const [firstMonth, secondMonth] = months.map(m => MONTHS.indexOf(m));\n  /* istanbul ignore next */\n\n  return firstMonth !== -1 && secondMonth === undefined || firstMonth !== -1 && secondMonth !== -1 && firstMonth <= secondMonth;\n};\n\nconst isValidWithinRange = (field, x, y) => isWildcard(field) || isValidNumber(field, x, y) || isValidNumberRange(field, x, y) || isValidFraction(field, x, y);\n\nconst isValidSecondField = field => isValidWithinRange(field, 0, 59);\n\nconst isValidMinuteField = field => isValidWithinRange(field, 0, 59);\n\nconst isValidHourField = field => isValidWithinRange(field, 0, 23);\n\nconst isValidDayField = field => isValidWithinRange(field, 0, 31) || isUndefined(field);\n\nconst isValidMonthField = field => isValidWithinRange(field, 1, 12) || isAlphabeticMonth(field);\n\nconst isValidWeekdayField = field => isValidWithinRange(field, 1, 7) || isAlphabeticWeekday(field) || isUndefined(field);\n/**\n * Cron expression validation. Validates the Spring Scheduling pattern.\n * Format: <second> <minute> <hour> <day-of-month> <month> <day-of-week>\n * Source code: https://git.io/vpoqG\n * Documentation: https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/scheduling/support/CronSequenceGenerator.html\n */\n\n\nconst validateCron = exp => {\n  if (!exp) {\n    return false;\n  }\n\n  const fields = exp.trim().split(' ');\n\n  if (!isValidFields(fields)) {\n    return false;\n  }\n\n  return isValidSecondField(fields[0]) && isValidMinuteField(fields[1]) && isValidHourField(fields[2]) && isValidDayField(fields[3]) && isValidMonthField(fields[4]) && isValidWeekdayField(fields[5]);\n};\n\nexport default validateCron;","import i18n from '@dhis2/d2-i18n';\nimport validateCron from './validate-cron';\n\nconst requiredCron = value => {\n  const isString = typeof value === 'string';\n  const isFilled = isString && value.length > 0;\n\n  if (!isFilled) {\n    return i18n.t('A CRON expression is required');\n  }\n\n  if (!validateCron(value)) {\n    return i18n.t('Please enter a valid CRON expression');\n  }\n\n  return undefined;\n};\n\nexport default requiredCron;","import cronstrue from 'cronstrue/i18n';\nimport { useContext } from 'react';\nimport { validateCron } from '../../services/validators';\nimport { LocaleContext } from '../../components/Context';\n\nconst useHumanReadableCron = cronExpression => {\n  const locale = useContext(LocaleContext);\n  const isValid = cronExpression && validateCron(cronExpression);\n\n  if (!locale || !isValid) {\n    return '';\n  }\n\n  return cronstrue.toString(cronExpression, {\n    locale\n  });\n};\n\nexport default useHumanReadableCron;","import { PropTypes } from '@dhis2/prop-types';\nimport { useHumanReadableCron } from '../../hooks/human-readable-cron';\n\nconst HumanReadableCron = ({\n  cronExpression\n}) => useHumanReadableCron(cronExpression);\n\nconst {\n  string\n} = PropTypes;\nHumanReadableCron.propTypes = {\n  cronExpression: string.isRequired\n};\nexport default HumanReadableCron;","import React from 'react';\nimport { PropTypes } from '@dhis2/prop-types';\nimport i18n from '@dhis2/d2-i18n';\nimport { HumanReadableCron } from '../../components/Cron';\n\nconst JobSchedule = ({\n  cronExpression,\n  schedulingType,\n  delay\n}) => {\n  switch (schedulingType) {\n    case 'CRON':\n      return <HumanReadableCron cronExpression={cronExpression} />;\n\n    case 'FIXED_DELAY':\n      return i18n.t('{{ delay }} seconds after last run', {\n        delay\n      });\n\n    default:\n      // Unrecognised or invalid type\n      return '-';\n  }\n};\n\nconst {\n  string,\n  number\n} = PropTypes;\nJobSchedule.propTypes = {\n  schedulingType: string.isRequired,\n  cronExpression: string,\n  delay: number\n};\nexport default JobSchedule;","import React from 'react';\nimport { PropTypes } from '@dhis2/prop-types';\nimport { TableRow, TableCell } from '@dhis2/ui';\nimport { jobTypesMap } from '../../services/server-translations';\nimport { ToggleJobSwitch } from '../../components/Switches';\nimport JobListActions from './JobListActions';\nimport JobStatus from './JobStatus';\nimport JobNextRun from './JobNextRun';\nimport JobSchedule from './JobSchedule';\n\nconst JobListTableItem = ({\n  job: {\n    id,\n    displayName,\n    jobType,\n    cronExpression,\n    delay,\n    jobStatus,\n    nextExecutionTime,\n    schedulingType,\n    enabled,\n    configurable\n  }\n}) => <TableRow>\n        <TableCell>{displayName}</TableCell>\n        <TableCell>{jobTypesMap[jobType]}</TableCell>\n        <TableCell>\n            <JobSchedule cronExpression={cronExpression} delay={delay} schedulingType={schedulingType} />\n        </TableCell>\n        <TableCell>\n            <JobNextRun nextExecutionTime={nextExecutionTime} enabled={enabled} />\n        </TableCell>\n        <TableCell>\n            <JobStatus status={jobStatus} />\n        </TableCell>\n        <TableCell>\n            <ToggleJobSwitch id={id} checked={enabled} />\n        </TableCell>\n        <TableCell>\n            <JobListActions id={id} configurable={configurable} />\n        </TableCell>\n    </TableRow>;\n\nconst {\n  shape,\n  string,\n  bool,\n  number\n} = PropTypes;\nJobListTableItem.propTypes = {\n  job: shape({\n    displayName: string.isRequired,\n    enabled: bool.isRequired,\n    id: string.isRequired,\n    jobStatus: string.isRequired,\n    jobType: string.isRequired,\n    schedulingType: string.isRequired,\n    cronExpression: string,\n    delay: number,\n    nextExecutionTime: string\n  }).isRequired\n};\nexport default JobListTableItem;","import React from 'react';\nimport { PropTypes } from '@dhis2/prop-types';\nimport { Table, TableHead, TableRowHead, TableRow, TableCell, TableCellHead, TableBody } from '@dhis2/ui';\nimport i18n from '@dhis2/d2-i18n';\nimport JobListTableItem from './JobListTableItem';\n\nconst JobListTable = ({\n  jobIds,\n  jobEntities\n}) => <Table>\n        <TableHead>\n            <TableRowHead>\n                <TableCellHead>{i18n.t('Job name')}</TableCellHead>\n                <TableCellHead>{i18n.t('Type')}</TableCellHead>\n                <TableCellHead>{i18n.t('Schedule')}</TableCellHead>\n                <TableCellHead>{i18n.t('Next run')}</TableCellHead>\n                <TableCellHead>{i18n.t('Status')}</TableCellHead>\n                <TableCellHead>{i18n.t('On/off')}</TableCellHead>\n                <TableCellHead />\n            </TableRowHead>\n        </TableHead>\n        <TableBody>\n            {jobIds.length === 0 ? <TableRow>\n                    <TableCell>{i18n.t('No jobs to display')}</TableCell>\n                </TableRow> : jobIds.map(id => <JobListTableItem key={id} job={jobEntities[id]} />)}\n        </TableBody>\n    </Table>;\n\nconst {\n  object,\n  arrayOf,\n  string\n} = PropTypes;\nJobListTable.propTypes = {\n  jobEntities: object.isRequired,\n  jobIds: arrayOf(string).isRequired\n};\nexport default JobListTable;","import React from 'react';\nimport { PropTypes } from '@dhis2/prop-types';\nimport { Card, Switch, Input, Button } from '@dhis2/ui';\nimport i18n from '@dhis2/d2-i18n';\nimport history from '../../services/history';\nimport JobListTable from './JobListTable';\nimport styles from './JobList.module.css';\n\nconst JobList = ({\n  jobIds,\n  jobEntities,\n  isLoading,\n  showSystemJobs,\n  setShowSystemJobs,\n  jobFilter,\n  setJobFilter\n}) => {\n  return <React.Fragment>\n            <header className={styles.header}>\n                <h1 className={styles.headerTitle}>\n                    {i18n.t('Scheduled jobs')}\n                </h1>\n            </header>\n            <Card>\n                <div className={styles.controlContainer}>\n                    <Input dataTest=\"job-filter-input\" placeholder={i18n.t('Filter jobs')} onChange={({\n          value\n        }) => {\n          setJobFilter(value);\n        }} value={jobFilter} />\n                    <div className={styles.controlRight}>\n                        <Switch dataTest=\"job-toggle-switch\" checked={showSystemJobs} disabled={isLoading} label={i18n.t('Show system jobs')} onChange={({\n            checked\n          }) => {\n            setShowSystemJobs(checked);\n          }} />\n                        <Button dataTest=\"new-job-button\" onClick={() => {\n            history.push('/add');\n          }}>\n                            {i18n.t('New job')}\n                        </Button>\n                    </div>\n                </div>\n                <JobListTable jobIds={jobIds} jobEntities={jobEntities} />\n            </Card>\n        </React.Fragment>;\n};\n\nconst {\n  bool,\n  object,\n  string,\n  arrayOf,\n  func\n} = PropTypes;\nJobList.propTypes = {\n  isLoading: bool.isRequired,\n  jobEntities: object.isRequired,\n  jobFilter: string.isRequired,\n  jobIds: arrayOf(string).isRequired,\n  setJobFilter: func.isRequired,\n  setShowSystemJobs: func.isRequired,\n  showSystemJobs: bool.isRequired\n};\nexport default JobList;","import React, { useState } from 'react';\nimport { CircularLoader, Layer, CenteredContent } from '@dhis2/ui';\nimport i18n from '@dhis2/d2-i18n';\nimport { useDataQuery } from '@dhis2/app-runtime';\nimport { RefetchJobsContext } from '../../components/Context';\nimport { getIds, getUserJobs, getEntities, getJobsMatchingFilter } from './selectors';\nimport JobList from './JobList';\nconst query = {\n  jobs: {\n    resource: 'jobConfigurations',\n    params: {\n      fields: '*',\n      paging: false\n    }\n  }\n};\n\nconst JobListContainer = () => {\n  const {\n    loading,\n    error,\n    data,\n    refetch\n  } = useDataQuery(query);\n  const [showSystemJobs, setShowSystemJobs] = useState(false);\n  const [jobFilter, setJobFilter] = useState(''); // Show spinner when there are no jobs to display yet\n\n  if (loading) {\n    return <Layer>\n                <CenteredContent>\n                    <CircularLoader />\n                    {i18n.t('Loading jobs')}\n                </CenteredContent>\n            </Layer>;\n  }\n\n  if (error) {\n    /**\n     * If we don't have any data to render this route is\n     * useless, so throw the error and let the user know\n     * they should refresh.\n     */\n    throw error;\n  }\n\n  const jobs = data.jobs.jobConfigurations; // Filter jobs by the jobFilter string\n\n  const filteredJobs = getJobsMatchingFilter(jobs, jobFilter); // Show or hide system jobs\n\n  const jobIds = showSystemJobs ? getIds(filteredJobs) : getIds(getUserJobs(filteredJobs));\n  return <RefetchJobsContext.Provider value={refetch}>\n            <JobList jobIds={jobIds} jobEntities={getEntities(jobs)} isLoading={loading} showSystemJobs={showSystemJobs} setShowSystemJobs={setShowSystemJobs} jobFilter={jobFilter} setJobFilter={setJobFilter} />\n        </RefetchJobsContext.Provider>;\n};\n\nexport default JobListContainer;","import React, { useState } from 'react';\nimport { PropTypes } from '@dhis2/prop-types';\nimport { Button } from '@dhis2/ui';\nimport i18n from '@dhis2/d2-i18n';\nimport { CronPresetModal } from '../Modal';\n\nconst CronPresetButton = ({\n  setCron,\n  small\n}) => {\n  const [showModal, setShowModal] = useState(false);\n  return <React.Fragment>\n            <Button onClick={() => setShowModal(true)} small={small}>\n                {i18n.t('Choose from preset times')}\n            </Button>\n            {showModal && <CronPresetModal hideModal={\n    /* istanbul ignore next */\n    () => setShowModal(false)} setCron={setCron} />}\n        </React.Fragment>;\n};\n\nCronPresetButton.defaultProps = {\n  small: false\n};\nconst {\n  func,\n  bool\n} = PropTypes;\nCronPresetButton.propTypes = {\n  setCron: func.isRequired,\n  small: bool\n};\nexport default CronPresetButton;","import React, { useState } from 'react';\nimport { PropTypes } from '@dhis2/prop-types';\nimport { Button } from '@dhis2/ui';\nimport history from '../../services/history';\nimport { DiscardFormModal } from '../Modal';\n\nconst DiscardFormButton = ({\n  shouldConfirm,\n  children,\n  small,\n  className\n}) => {\n  const [showModal, setShowModal] = useState(false);\n  const onClick = shouldConfirm ? () => setShowModal(true) : () => history.push('/');\n  return <React.Fragment>\n            <Button onClick={onClick} small={small} className={className}>\n                {children}\n            </Button>\n            {showModal && <DiscardFormModal hideModal={\n    /* istanbul ignore next */\n    () => setShowModal(false)} />}\n        </React.Fragment>;\n};\n\nDiscardFormButton.defaultProps = {\n  className: '',\n  shouldConfirm: false,\n  small: false\n};\nconst {\n  string,\n  bool\n} = PropTypes;\nDiscardFormButton.propTypes = {\n  children: string.isRequired,\n  className: string,\n  shouldConfirm: bool,\n  small: bool\n};\nexport default DiscardFormButton;","import { FinalForm } from '@dhis2/ui';\nconst {\n  FORM_ERROR\n} = FinalForm;\n/**\n * Formats the errors returned by our backend to a format that final-form can parse\n */\n\nconst formatError = error => {\n  const {\n    details: {\n      response\n    }\n  } = error;\n  const validationErrors = {};\n  /**\n   * Some backend errors do not have a way for us to infer the related field,\n   * those can be put in genericErrors\n   */\n\n  const genericErrors = [];\n\n  if (response.errorReports && response.errorReports.length) {\n    response.errorReports.forEach(report => {\n      /**\n       * errorProperty is how the backend indicates the field that the error\n       * is related to. If we know this, return it as a field specific error\n       * (note that this will swallow errors if the backend indicates a field\n       * that does not exist in the frontend). Otherwise we'll push it to the\n       * generic errors.\n       */\n      if (report.errorProperty) {\n        validationErrors[report.errorProperty] = report.message;\n      } else {\n        genericErrors.push(report.message);\n      }\n    });\n  }\n\n  if (genericErrors.length > 0) {\n    validationErrors[FORM_ERROR] = genericErrors;\n  }\n\n  return validationErrors;\n};\n\nexport default formatError;","import formatError from './format-error';\nexport default formatError;","import { useDataEngine } from '@dhis2/app-runtime';\nimport history from '../../services/history';\nimport formatError from '../../services/format-error';\nconst mutation = {\n  resource: 'jobConfigurations',\n  type: 'create',\n  data:\n  /* istanbul ignore next */\n  ({\n    job\n  }) => job\n};\n\nconst useSubmitJob = () => {\n  const engine = useDataEngine();\n\n  const submitJob = job => engine.mutate(mutation, {\n    variables: {\n      job\n    }\n  }).then(() => {\n    history.push('/');\n  }).catch(error => {\n    const isValidationError = error.type === 'access'; // Potential validation error, return it in a format final-form can handle\n\n    if (isValidationError) {\n      return formatError(error);\n    } // Throw any unexpected errors\n\n\n    throw error;\n  });\n\n  return [submitJob];\n};\n\nexport default useSubmitJob;","import { useDataEngine } from '@dhis2/app-runtime';\nimport history from '../../services/history';\nimport formatError from '../../services/format-error';\nconst mutation = {\n  resource: 'jobConfigurations',\n  type: 'update',\n  id:\n  /* istanbul ignore next */\n  ({\n    id\n  }) => id,\n  data:\n  /* istanbul ignore next */\n  ({\n    job\n  }) => job\n};\n\nconst useUpdateJob = ({\n  id\n}) => {\n  const engine = useDataEngine();\n\n  const updateJob = job => engine.mutate(mutation, {\n    variables: {\n      job,\n      id\n    }\n  }).then(() => {\n    history.push('/');\n  }).catch(error => {\n    const isValidationError = error.type === 'access'; // Potential validation error, return it in a format final-form can handle\n\n    if (isValidationError) {\n      return formatError(error);\n    } // Throw any unexpected errors\n\n\n    throw error;\n  });\n\n  return [updateJob];\n};\n\nexport default useUpdateJob;","import React from 'react';\nimport { PropTypes } from '@dhis2/prop-types';\nimport { NoticeBox } from '@dhis2/ui';\nimport i18n from '@dhis2/d2-i18n';\nimport styles from './FormErrorBox.module.css';\n\nconst FormErrorBox = ({\n  submitError\n}) => {\n  const hasGenericSubmitErrors = submitError.length > 0;\n\n  if (!hasGenericSubmitErrors) {\n    return null;\n  }\n\n  return <NoticeBox error title={i18n.t('Something went wrong whilst creating your job')}>\n            <ul className={styles.list}>\n                {submitError.map(error => <li key={error}>{error}</li>)}\n            </ul>\n        </NoticeBox>;\n};\n\nconst {\n  array\n} = PropTypes;\nFormErrorBox.propTypes = {\n  submitError: array.isRequired\n};\nexport default FormErrorBox;","import React from 'react';\nimport { ReactFinalForm, InputFieldFF, composeValidators, hasValue, string } from '@dhis2/ui';\nimport i18n from '@dhis2/d2-i18n';\nconst {\n  Field\n} = ReactFinalForm; // The key under which this field will be sent to the backend\n\nconst FIELD_NAME = 'name';\nconst VALIDATOR = composeValidators(string, hasValue);\n\nconst JobNameField = () => <Field name={FIELD_NAME} component={InputFieldFF} validate={VALIDATOR} label={i18n.t('Name')} type=\"text\" required />;\n\nexport default JobNameField;","import React from 'react';\nimport { ReactFinalForm, SingleSelectFieldFF, SingleSelectField, composeValidators, hasValue, string } from '@dhis2/ui';\nimport i18n from '@dhis2/d2-i18n';\nimport { useDataQuery } from '@dhis2/app-runtime';\nimport { jobTypesMap } from '../../services/server-translations';\nconst {\n  Field\n} = ReactFinalForm; // The key under which this field will be sent to the backend\n\nexport const FIELD_NAME = 'jobType';\nconst VALIDATOR = composeValidators(string, hasValue);\nconst query = {\n  jobTypes: {\n    resource: 'jobConfigurations/jobTypes'\n  }\n};\n\nconst JobTypeField = () => {\n  const {\n    loading,\n    error,\n    data\n  } = useDataQuery(query);\n\n  if (loading) {\n    return <SingleSelectField loading loadingText={i18n.t('Loading')} label={i18n.t('Job type')} required />;\n  }\n\n  if (error) {\n    /**\n     * We need the data, so throw the error if it\n     * can't be loaded.\n     */\n    throw error;\n  }\n\n  const options = data.jobTypes.jobTypes.map(({\n    jobType\n  }) => ({\n    value: jobType,\n    label: jobTypesMap[jobType]\n  }));\n  return <Field name={FIELD_NAME} validate={VALIDATOR} component={SingleSelectFieldFF} options={options} label={i18n.t('Job type')} required />;\n};\n\nexport default JobTypeField;","/**\n * Cleans up the endpoint for use with the data engine\n */\nexport const getParameterEndpoint = endpoint => {\n  if (!endpoint || !endpoint.startsWith('/api/')) {\n    return endpoint;\n  } // Remove the '/api/'\n\n\n  return endpoint.slice(5);\n};\n/**\n * Find a jobType object by the jobType string\n */\n\nexport const getJobTypeObject = (jobTypes, jobType) => {\n  return jobTypes.find(job => job.jobType === jobType);\n};\n/**\n * Returns an array with all parameters for a certain jobType\n */\n\nexport const getJobTypeParameters = (jobTypes, jobType) => {\n  const selectedJobType = getJobTypeObject(jobTypes, jobType);\n  const hasParameters = 'jobParameters' in selectedJobType;\n\n  if (!hasParameters) {\n    return [];\n  }\n\n  return selectedJobType.jobParameters;\n};\n/**\n * Our backend returns certain values as a number, but our\n * inputs expect and return a string, so we're formatting them to strings\n */\n\nexport const getStringValue = value => {\n  if (typeof value === 'number') {\n    return value.toString();\n  }\n\n  return value;\n};","import React from 'react';\nimport { PropTypes } from '@dhis2/prop-types';\nimport i18n from '@dhis2/d2-i18n';\nimport { useDataQuery } from '@dhis2/app-runtime';\nimport { MultiSelectField, ReactFinalForm, MultiSelectFieldFF } from '@dhis2/ui';\nconst {\n  Field\n} = ReactFinalForm;\nconst query = {\n  options: {\n    resource: '/',\n    id:\n    /* istanbul ignore next */\n    ({\n      id\n    }) => id,\n    params: {\n      paging: false\n    }\n  }\n};\n/**\n * An unlabeled options field has options that are just values, as opposed\n * to the labeled options field, where the options have labels as well as\n * values.\n */\n\nconst UnlabeledOptionsField = ({\n  endpoint,\n  label,\n  name\n}) => {\n  /**\n   * HACK: this is a bit of a hack to allow using the useDataQuery hook with\n   * a dynamic query. Initially we used a custom hook for this but that\n   * replicated all of the internal logic of the useDataQuery hook so this\n   * seems like a better trade-off.\n   */\n  const {\n    loading,\n    error,\n    data\n  } = useDataQuery(query, {\n    variables: {\n      id: endpoint\n    }\n  });\n\n  if (loading) {\n    return <MultiSelectField loading label={label} />;\n  }\n\n  if (error) {\n    /**\n     * We need these values, so throw the error if they\n     * can't be loaded.\n     */\n    throw error;\n  }\n\n  if (data.options.length === 0) {\n    return <MultiSelectField disabled helpText={i18n.t('No options available')} label={label} />;\n  }\n\n  const options = data.options.map(option => ({\n    value: option,\n    label: option\n  }));\n  return <Field name={name} component={MultiSelectFieldFF} options={options} label={label} />;\n};\n\nconst {\n  string\n} = PropTypes;\nUnlabeledOptionsField.propTypes = {\n  endpoint: string.isRequired,\n  label: string.isRequired,\n  name: string.isRequired\n};\nexport default UnlabeledOptionsField;","import React from 'react';\nimport { PropTypes } from '@dhis2/prop-types';\nimport { MultiSelectFieldFF, ReactFinalForm, MultiSelectField } from '@dhis2/ui';\nimport i18n from '@dhis2/d2-i18n';\nimport { useDataQuery } from '@dhis2/app-runtime';\nconst {\n  Field\n} = ReactFinalForm;\nconst query = {\n  options: {\n    resource: '/',\n    id:\n    /* istanbul ignore next */\n    ({\n      id\n    }) => id,\n    params: {\n      paging: false\n    }\n  }\n};\n/**\n * A labeled options field has options that have both a label and a value,\n * as opposed to the unlabeled options field, where the options just have\n * values.\n */\n\nconst LabeledOptionsField = ({\n  endpoint,\n  label,\n  name,\n  parameterName\n}) => {\n  /**\n   * HACK: this is a bit of a hack to allow using the useDataQuery hook with\n   * a dynamic query. Initially we used a custom hook for this but that\n   * replicated all of the internal logic of the useDataQuery hook so this\n   * seems like a better trade-off.\n   */\n  const {\n    loading,\n    error,\n    data\n  } = useDataQuery(query, {\n    variables: {\n      id: endpoint\n    }\n  });\n\n  if (loading) {\n    return <MultiSelectField loading label={label} />;\n  }\n\n  if (error) {\n    /**\n     * We need these values, so throw the error if they\n     * can't be loaded.\n     */\n    throw error;\n  }\n\n  if (!(parameterName in data.options) || data.options[parameterName].length === 0) {\n    return <MultiSelectField disabled helpText={i18n.t('No options available')} label={label} />;\n  }\n\n  const options = data.options[parameterName].map(({\n    id,\n    displayName\n  }) => ({\n    value: id,\n    label: displayName\n  }));\n  return <Field name={name} component={MultiSelectFieldFF} options={options} label={label} />;\n};\n\nconst {\n  string\n} = PropTypes;\nLabeledOptionsField.propTypes = {\n  endpoint: string.isRequired,\n  label: string.isRequired,\n  name: string.isRequired,\n  parameterName: string.isRequired\n};\nexport default LabeledOptionsField;","import React from 'react';\nimport { PropTypes } from '@dhis2/prop-types';\nimport { ReactFinalForm, InputFieldFF, SwitchFieldFF, Box } from '@dhis2/ui';\nimport { useDataQuery } from '@dhis2/app-runtime';\nimport { getJobTypeParameters, getParameterEndpoint, getStringValue } from './selectors';\nimport UnlabeledOptionsField from './UnlabeledOptionsField';\nimport LabeledOptionsField from './LabeledOptionsField';\nimport styles from './ParameterFields.module.css';\nconst {\n  Field\n} = ReactFinalForm; // The key under which the parameters will be sent to the backend\n\nconst FIELD_NAME = 'jobParameters';\nconst query = {\n  jobTypes: {\n    resource: 'jobConfigurations/jobTypes'\n  }\n}; // Renders all parameters for a given jobtype\n\nconst ParameterFields = ({\n  jobType\n}) => {\n  const {\n    loading,\n    error,\n    data\n  } = useDataQuery(query);\n\n  if (loading) {\n    return null;\n  }\n\n  if (error) {\n    /**\n     * We need the parameters, so throw the error if these\n     * can't be loaded.\n     */\n    throw error;\n  }\n\n  const parameters = getJobTypeParameters(data.jobTypes.jobTypes, jobType);\n\n  if (parameters.length === 0) {\n    return null;\n  } // Map all parameters to the appropriate field types\n\n\n  const parameterComponents = parameters.map(({\n    fieldName,\n    name,\n    klass,\n    relativeApiEndpoint\n  }) => {\n    const defaultProps = {\n      label: fieldName,\n      name: `${FIELD_NAME}.${name}`\n    };\n    const endpoint = getParameterEndpoint(relativeApiEndpoint);\n    let parameterComponent = null;\n\n    switch (klass) {\n      case 'java.lang.String':\n        parameterComponent = <Field {...defaultProps} component={InputFieldFF} type=\"text\" />;\n        break;\n\n      case 'java.lang.Boolean':\n        parameterComponent = <Field {...defaultProps} component={SwitchFieldFF} type=\"checkbox\" />;\n        break;\n\n      case 'java.lang.Integer':\n        parameterComponent = <Field {...defaultProps} component={InputFieldFF} format={getStringValue} type=\"number\" />;\n        break;\n\n      case 'java.util.Set':\n        parameterComponent = <UnlabeledOptionsField {...defaultProps} endpoint={endpoint} />;\n        break;\n\n      case 'java.util.List':\n        parameterComponent = <LabeledOptionsField {...defaultProps} parameterName={name} endpoint={endpoint} />;\n        break;\n    } // Wrap all components in a Box for spacing\n\n\n    return <Box marginTop=\"16px\" key={name}>\n                    {parameterComponent}\n                </Box>;\n  });\n  return <React.Fragment>\n            <header>\n                <h4 className={styles.headerTitle}>Monitoring parameters</h4>\n            </header>\n            {parameterComponents}\n        </React.Fragment>;\n};\n\nconst {\n  string\n} = PropTypes;\nParameterFields.propTypes = {\n  jobType: string.isRequired\n};\nexport default ParameterFields;","import React from 'react';\nimport { Box, ReactFinalForm, InputFieldFF } from '@dhis2/ui';\nimport i18n from '@dhis2/d2-i18n';\nimport { useHumanReadableCron } from '../../hooks/human-readable-cron';\nimport { requiredCron } from '../../services/validators';\nimport { CronPresetButton } from '../Buttons';\nconst {\n  Field,\n  useFormState,\n  useForm\n} = ReactFinalForm; // The key under which this field will be sent to the backend\n\nconst FIELD_NAME = 'cronExpression';\nconst VALIDATOR = requiredCron;\n\nconst CronField = () => {\n  const form = useForm();\n  const {\n    values\n  } = useFormState({\n    subscription: {\n      values: true\n    }\n  });\n  const cronExpression = values[FIELD_NAME];\n  const helpText = useHumanReadableCron(cronExpression);\n  return <React.Fragment>\n            <Field component={InputFieldFF} name={FIELD_NAME} validate={VALIDATOR} label={i18n.t('CRON Expression')} type=\"text\" helpText={helpText} required />\n            <Box marginTop=\"8px\">\n                <CronPresetButton setCron={\n      /* istanbul ignore next */\n      cron => form.change(FIELD_NAME, cron)} small />\n            </Box>\n        </React.Fragment>;\n};\n\nexport default CronField;","import React from 'react';\nimport { ReactFinalForm, InputFieldFF, composeValidators, hasValue, integer, createNumberRange } from '@dhis2/ui';\nimport i18n from '@dhis2/d2-i18n';\nimport { getStringValue } from './selectors';\nconst {\n  Field\n} = ReactFinalForm; // Omitting the underscore here since it messes up i18n\n\nconst LOWERBOUND = 1;\nconst UPPERBOUND = 86400; // The key under which this field will be sent to the backend\n\nconst FIELD_NAME = 'delay';\nconst VALIDATOR = composeValidators(integer, hasValue, createNumberRange(LOWERBOUND, UPPERBOUND));\n\nconst DelayField = () => <Field component={InputFieldFF} name={FIELD_NAME} validate={VALIDATOR} label={i18n.t('Delay')} type=\"number\" format={getStringValue} helpText={i18n.t('Delay in seconds ({{ LOWERBOUND }} - {{ UPPERBOUND }})', {\n  LOWERBOUND,\n  UPPERBOUND\n})} required />;\n\nexport default DelayField;","import React from 'react';\nimport { PropTypes } from '@dhis2/prop-types';\nimport { useDataQuery } from '@dhis2/app-runtime';\nimport { getJobTypeObject } from './selectors';\nimport CronField from './CronField';\nimport DelayField from './DelayField';\nconst query = {\n  jobTypes: {\n    resource: 'jobConfigurations/jobTypes'\n  }\n};\n\nconst ScheduleField = ({\n  jobType\n}) => {\n  const {\n    loading,\n    error,\n    data\n  } = useDataQuery(query);\n\n  if (loading) {\n    return null;\n  }\n\n  if (error) {\n    /**\n     * We need the jobtypes, so throw the error if these\n     * can't be loaded.\n     */\n    throw error;\n  }\n\n  const currentJob = getJobTypeObject(data.jobTypes.jobTypes, jobType);\n  const schedulingType = currentJob.schedulingType;\n\n  switch (schedulingType) {\n    case 'CRON':\n      return <CronField />;\n\n    case 'FIXED_DELAY':\n      return <DelayField />;\n\n    default:\n      // Unrecognised scheduling type\n      return null;\n  }\n};\n\nconst {\n  string\n} = PropTypes;\nScheduleField.propTypes = {\n  jobType: string.isRequired\n};\nexport default ScheduleField;","import JobNameField from './JobNameField';\nimport JobTypeField, { FIELD_NAME as JOB_TYPE } from './JobTypeField';\nimport ParameterFields from './ParameterFields';\nimport ScheduleField from './ScheduleField';\nconst fieldNames = {\n  JOB_TYPE\n};\nexport { JobNameField, ScheduleField, JobTypeField, ParameterFields, fieldNames };","import React, { useEffect } from 'react';\nimport { PropTypes } from '@dhis2/prop-types';\nimport i18n from '@dhis2/d2-i18n';\nimport { Button, CircularLoader, Box, ReactFinalForm } from '@dhis2/ui';\nimport { DiscardFormButton } from '../Buttons';\nimport { FormErrorBox } from '../FormErrorBox';\nimport { ScheduleField, JobNameField, JobTypeField, ParameterFields, fieldNames } from '../FormFields';\nimport styles from './JobForm.module.css';\nconst {\n  useForm\n} = ReactFinalForm;\n\nconst JobForm = ({\n  handleSubmit,\n  pristine,\n  submitting,\n  submitError,\n  hasSubmitErrors,\n  values,\n  setIsPristine\n}) => {\n  const {\n    subscribe\n  } = useForm();\n  /**\n   * Lift pristine state up on changes, wrapped in useEffect because calls to setState\n   * outside of the component that owns the setState should not happen synchronously.\n   */\n\n  useEffect(() => {\n    subscribe(({\n      pristine\n    }) => setIsPristine(pristine), {\n      pristine: true\n    });\n  }); // Check if there's currently a selected job type\n\n  const jobType = values[fieldNames.JOB_TYPE]; // Show a spinner only when submitting\n\n  const Spinner = submitting ? <CircularLoader small /> : null;\n  return <form onSubmit={handleSubmit}>\n            <Box maxWidth=\"600px\">\n                <JobNameField />\n            </Box>\n            <Box marginTop=\"16px\" maxWidth=\"400px\">\n                <JobTypeField />\n            </Box>\n            {jobType && <Box marginTop=\"16px\" maxWidth=\"400px\">\n                    <ScheduleField jobType={jobType} />\n                </Box>}\n            {jobType && <Box marginTop=\"32px\" maxWidth=\"400px\">\n                    <ParameterFields jobType={jobType} />\n                </Box>}\n            {hasSubmitErrors && <Box marginTop=\"32px\" maxWidth=\"600px\">\n                    <FormErrorBox submitError={submitError} />\n                </Box>}\n            <div className={styles.formButtonContainer}>\n                <Button primary type=\"submit\" disabled={pristine || submitting} icon={Spinner} className={styles.saveButton}>\n                    {i18n.t('Save')}\n                </Button>\n                <DiscardFormButton shouldConfirm={!pristine}>\n                    {i18n.t('Cancel')}\n                </DiscardFormButton>\n            </div>\n        </form>;\n};\n\nconst {\n  func,\n  bool,\n  object,\n  array\n} = PropTypes;\nJobForm.defaultProps = {\n  submitError: []\n};\nJobForm.propTypes = {\n  handleSubmit: func.isRequired,\n  hasSubmitErrors: bool.isRequired,\n  pristine: bool.isRequired,\n  setIsPristine: func.isRequired,\n  submitting: bool.isRequired,\n  values: object.isRequired,\n  submitError: array\n};\nexport default JobForm;","import React from 'react';\nimport { PropTypes } from '@dhis2/prop-types';\nimport { ReactFinalForm } from '@dhis2/ui';\nimport { useSubmitJob } from '../../hooks/jobs';\nimport JobForm from './JobForm';\nconst {\n  Form\n} = ReactFinalForm;\n\nconst JobAddFormContainer = ({\n  setIsPristine\n}) => {\n  const [submitJob] = useSubmitJob();\n  /**\n   * destroyOnUnregister is enabled so that dynamic fields will be unregistered\n   * when they're removed from the form, for instance when the jobType changes.\n   */\n\n  return <Form onSubmit={submitJob} component={JobForm} setIsPristine={setIsPristine} destroyOnUnregister />;\n};\n\nconst {\n  func\n} = PropTypes;\nJobAddFormContainer.propTypes = {\n  setIsPristine: func.isRequired\n};\nexport default JobAddFormContainer;","import React from 'react';\nimport { PropTypes } from '@dhis2/prop-types';\nimport { ReactFinalForm } from '@dhis2/ui';\nimport { useParams } from 'react-router-dom';\nimport { useDataQuery } from '@dhis2/app-runtime';\nimport { useUpdateJob } from '../../hooks/jobs';\nimport JobForm from './JobForm';\nconst {\n  Form\n} = ReactFinalForm;\n/**\n * The fields we need for the initialValues for our form fields. Since we use\n * these values to set the initial values in final-form, if we wouldn't filter\n * them we'd end up submitting way more data than we intend to.\n */\n\nconst whitelistedFields = ['cronExpression', 'delay', 'jobParameters', 'jobType', 'name', 'schedulingType'];\nconst query = {\n  job: {\n    resource: 'jobConfigurations',\n    id:\n    /* istanbul ignore next */\n    ({\n      id\n    }) => id,\n    params: {\n      paging: false,\n      fields: whitelistedFields.join(',')\n    }\n  }\n};\n\nconst JobEditFormContainer = ({\n  setIsPristine\n}) => {\n  const {\n    id\n  } = useParams();\n  const {\n    loading,\n    error,\n    data\n  } = useDataQuery(query, {\n    variables: {\n      id\n    }\n  });\n  const [updateJob] = useUpdateJob({\n    id\n  });\n\n  if (loading) {\n    return null;\n  }\n  /* istanbul ignore next: we're testing this section, but coverage reporting seems to disagree */\n\n\n  if (error) {\n    /**\n     * We need the data, so throw the error if it\n     * can't be loaded.\n     */\n    throw error;\n  }\n  /**\n   * destroyOnUnregister is enabled so that dynamic fields will be unregistered\n   * when they're removed from the form, for instance when the jobType changes.\n   */\n\n  /* istanbul ignore next: we're testing this section, but coverage reporting seems to disagree */\n\n\n  return <Form onSubmit={updateJob} component={JobForm} setIsPristine={setIsPristine} initialValues={data.job} destroyOnUnregister />;\n};\n\nconst {\n  func\n} = PropTypes;\nJobEditFormContainer.propTypes = {\n  setIsPristine: func.isRequired\n};\nexport default JobEditFormContainer;","import React from 'react';\nimport { PropTypes } from '@dhis2/prop-types';\nimport { Card, IconInfo16 } from '@dhis2/ui';\nimport i18n from '@dhis2/d2-i18n';\nimport { DiscardFormButton } from '../../components/Buttons';\nimport { JobEditFormContainer } from '../../components/Forms';\nimport styles from './JobEdit.module.css';\nconst infoLink = 'https://docs.dhis2.org/master/en/user/html/dataAdmin_scheduling.html#dataAdmin_scheduling_config';\n\nconst JobEdit = ({\n  isPristine,\n  setIsPristine,\n  name: JOBNAME\n}) => <React.Fragment>\n        <header className={styles.pageHeader}>\n            <DiscardFormButton shouldConfirm={!isPristine} className={styles.pageHeaderButton} small>\n                {i18n.t('Back to all jobs')}\n            </DiscardFormButton>\n            <h2 className={styles.pageHeaderTitle}>\n                {i18n.t('Job: {{ JOBNAME }}', {\n        JOBNAME,\n        nsSeparator: '>'\n      })}\n            </h2>\n        </header>\n        <Card className={styles.card}>\n            <header className={styles.cardHeader}>\n                <h3 className={styles.cardHeaderTitle}>\n                    {i18n.t('Configuration')}\n                </h3>\n                <a href={infoLink} className={styles.cardHeaderLink}>\n                    <span className={styles.cardHeaderInfo}>\n                        <IconInfo16 />\n                    </span>\n                    {i18n.t('About job configuration')}\n                </a>\n            </header>\n            <JobEditFormContainer setIsPristine={setIsPristine} />\n        </Card>\n    </React.Fragment>;\n\nconst {\n  bool,\n  func,\n  string\n} = PropTypes;\nJobEdit.propTypes = {\n  isPristine: bool.isRequired,\n  name: string.isRequired,\n  setIsPristine: func.isRequired\n};\nexport default JobEdit;","import React, { useState } from 'react';\nimport { CircularLoader, Layer, CenteredContent } from '@dhis2/ui';\nimport { useParams } from 'react-router-dom';\nimport { useDataQuery } from '@dhis2/app-runtime';\nimport JobEdit from './JobEdit';\nconst query = {\n  job: {\n    resource: 'jobConfigurations',\n    id:\n    /* istanbul ignore next */\n    ({\n      id\n    }) => id,\n    params: {\n      paging: false\n    }\n  }\n};\n\nconst JobEditContainer = () => {\n  const [isPristine, setIsPristine] = useState(true);\n  const {\n    id\n  } = useParams();\n  const {\n    loading,\n    error,\n    data\n  } = useDataQuery(query, {\n    variables: {\n      id\n    }\n  });\n\n  if (loading) {\n    return <Layer>\n                <CenteredContent>\n                    <CircularLoader />\n                </CenteredContent>\n            </Layer>;\n  }\n\n  if (error) {\n    /**\n     * The app can't continue if this fails, because it doesn't\n     * have the job data, so throw the error.\n     */\n    throw error;\n  }\n\n  return <JobEdit isPristine={isPristine} setIsPristine={setIsPristine} name={data.job.name} />;\n};\n\nexport default JobEditContainer;","import React from 'react';\nimport { PropTypes } from '@dhis2/prop-types';\nimport { Card, IconInfo16 } from '@dhis2/ui';\nimport i18n from '@dhis2/d2-i18n';\nimport { DiscardFormButton } from '../../components/Buttons';\nimport { JobAddFormContainer } from '../../components/Forms';\nimport styles from './JobAdd.module.css';\nconst infoLink = 'https://docs.dhis2.org/master/en/user/html/dataAdmin_scheduling.html#dataAdmin_scheduling_config';\n\nconst JobAdd = ({\n  isPristine,\n  setIsPristine\n}) => <React.Fragment>\n        <header className={styles.pageHeader}>\n            <DiscardFormButton shouldConfirm={!isPristine} className={styles.pageHeaderButton} small>\n                {i18n.t('Back to all jobs')}\n            </DiscardFormButton>\n            <h2 className={styles.pageHeaderTitle}>{i18n.t('New Job')}</h2>\n        </header>\n        <Card className={styles.card}>\n            <header className={styles.cardHeader}>\n                <h3 className={styles.cardHeaderTitle}>\n                    {i18n.t('Configuration')}\n                </h3>\n                <a href={infoLink} className={styles.cardHeaderLink} target=\"_blank\" rel=\"noopener noreferrer\">\n                    <span className={styles.cardHeaderInfo}>\n                        <IconInfo16 />\n                    </span>\n                    {i18n.t('About job configuration')}\n                </a>\n            </header>\n            <JobAddFormContainer setIsPristine={setIsPristine} />\n        </Card>\n    </React.Fragment>;\n\nconst {\n  bool,\n  func\n} = PropTypes;\nJobAdd.propTypes = {\n  isPristine: bool.isRequired,\n  setIsPristine: func.isRequired\n};\nexport default JobAdd;","import React, { useState } from 'react';\nimport JobAdd from './JobAdd';\n\nconst JobAddContainer = () => {\n  const [isPristine, setIsPristine] = useState(true);\n  return <JobAdd isPristine={isPristine} setIsPristine={setIsPristine} />;\n};\n\nexport default JobAddContainer;","import React from 'react';\nimport i18n from '@dhis2/d2-i18n';\n\nconst NotAuthorized = () => <div>{i18n.t('You are not authorized')}</div>;\n\nexport default NotAuthorized;","import React from 'react';\nimport { Route } from 'react-router-dom';\nimport { Router } from 'react-router';\nimport { AuthWall } from '../AuthWall';\nimport { JobListContainer } from '../../pages/JobList';\nimport { JobEditContainer } from '../../pages/JobEdit';\nimport { JobAddContainer } from '../../pages/JobAdd';\nimport { NotAuthorized } from '../../pages/NotAuthorized';\nimport history from '../../services/history';\n\nconst Routes = () => <Router history={history}>\n        <AuthWall>\n            <Route exact path=\"/\" component={JobListContainer} />\n            <Route path=\"/edit/:id\" component={JobEditContainer} />\n            <Route path=\"/add\" component={JobAddContainer} />\n        </AuthWall>\n        <Route path=\"/notauthorized\" component={NotAuthorized} />\n    </Router>;\n\nexport default Routes;","import React from 'react';\nimport { PropTypes } from '@dhis2/prop-types';\nimport styles from './PageWrapper.module.css';\n\nconst PageWrapper = ({\n  children\n}) => <div className={styles.wrapper}>{children}</div>;\n\nconst {\n  node\n} = PropTypes;\nPageWrapper.propTypes = {\n  children: node.isRequired\n};\nexport default PageWrapper;","import React from 'react';\nimport { CssVariables } from '@dhis2/ui';\nimport { useLocale } from '../../hooks/locale';\nimport { LocaleContext } from '../Context';\nimport { Routes } from '../Routes';\nimport { PageWrapper } from '../PageWrapper';\nimport './App.css';\n\nconst App = () => {\n  const locale = useLocale();\n  return <LocaleContext.Provider value={locale}>\n            <CssVariables spacers colors />\n            <PageWrapper>\n                <Routes />\n            </PageWrapper>\n        </LocaleContext.Provider>;\n};\n\nexport default App;","export { default } from './App';"],"sourceRoot":""}