(this["webpackJsonp@dhis2/app-shell"]=this["webpackJsonp@dhis2/app-shell"]||[]).push([[127],{200:function(e,a,t){e.exports={noticeBoxWrapper:"AuthWall_noticeBoxWrapper__1ums5"}},203:function(e,a,t){e.exports={header:"JobList_header__23tFt",headerTitle:"JobList_headerTitle__21D__",headerLink:"JobList_headerLink__2zepi",headerLinkIcon:"JobList_headerLinkIcon__XdfBB",controlContainer:"JobList_controlContainer__3Yzj_",controlRight:"JobList_controlRight__38lfB"}},204:function(e,a,t){e.exports={list:"FormErrorBox_list__3BejY"}},205:function(e,a,t){e.exports={headerTitle:"ParameterFields_headerTitle__IBF76"}},206:function(e,a,t){e.exports={formButtonContainer:"JobAddForm_formButtonContainer__1MLSp",saveButton:"JobAddForm_saveButton__RfxZ9"}},207:function(e,a,t){e.exports={formButtonContainer:"JobEditForm_formButtonContainer__2b6Fi",deleteButton:"JobEditForm_deleteButton__VQxBE",saveButton:"JobEditForm_saveButton__278Ab"}},214:function(e,a,t){e.exports={wrapper:"JobDetails_wrapper__1-YkO",title:"JobDetails_title__1Cht7",details:"JobDetails_details__2HITJ"}},215:function(e,a,t){e.exports={pageHeader:"JobEdit_pageHeader__3Fywp",pageHeaderButton:"JobEdit_pageHeaderButton__29yjJ",pageHeaderTitle:"JobEdit_pageHeaderTitle__jZrIG",card:"JobEdit_card__2QqEg",cardHeader:"JobEdit_cardHeader__Mv_cj",cardHeaderTitle:"JobEdit_cardHeaderTitle__29Y64",cardHeaderInfo:"JobEdit_cardHeaderInfo__3VWZt",cardHeaderLink:"JobEdit_cardHeaderLink__2frj7",jobDetails:"JobEdit_jobDetails__194v-"}},216:function(e,a,t){e.exports={pageHeader:"JobAdd_pageHeader__2NZzc",pageHeaderButton:"JobAdd_pageHeaderButton__Xg_R9",pageHeaderTitle:"JobAdd_pageHeaderTitle__1RMl0",card:"JobAdd_card__1HH6H",cardHeader:"JobAdd_cardHeader__1D3sS",cardHeaderTitle:"JobAdd_cardHeaderTitle__2TG9a",cardHeaderInfo:"JobAdd_cardHeaderInfo__vq_Y1",cardHeaderLink:"JobAdd_cardHeaderLink__2CzPt"}},217:function(e,a,t){e.exports={wrapper:"PageWrapper_wrapper__t-CJy"}},218:function(e,a,t){},224:function(e,a,t){"use strict";t.r(a);var n=t(1),r=t.n(n),l=t(181),o=t(219),s=t(182),c=t(8),i=t.n(c),d=t(13);var m=t(200),u=t.n(m);const E={me:{resource:"me"}},{node:b}=s.a;var p=({children:e})=>{const{loading:a,error:t,data:n}=Object(d.e)(E);if(a)return r.a.createElement(l.n,null,r.a.createElement(l.e,null,r.a.createElement(l.f,null)));if(t)throw t;return(e=>{const{authorities:a}=e;return!!a&&(a.includes("ALL")||a.includes("F_SCHEDULING_ADMIN"))})(n.me)?r.a.createElement(r.a.Fragment,null,e):r.a.createElement("div",{className:u.a.noticeBoxWrapper},r.a.createElement(l.v,{error:!0,title:i.a.t("Not authorized")},i.a.t("You don't have access to the Job Scheduler. Contact a system administrator to request access.")))};var g=Object(n.createContext)(()=>{throw new Error("RefetchJobsContext consumer needs to have a valid Provider as parent")});const h=e=>e.reduce((e,a)=>(e[a.id]=a,e),{}),_=e=>e.map(e=>e.id);var f=t(193);var j=Object(f.a)();var v={DATA_VALUE:i.a.t("Data value"),COMPLETENESS:i.a.t("Completeness"),COMPLETENESS_TARGET:i.a.t("Completeness target"),ORG_UNIT_TARGET:i.a.t("Org unit target"),EVENT:i.a.t("Event"),ENROLLMENT:i.a.t("Enrollment"),VALIDATION_RESULT:i.a.t("Validation result")};var T={ANALYTICS_TABLE:i.a.t("Analytics table"),CONTINUOUS_ANALYTICS_TABLE:i.a.t("Continuous analytics table"),CREDENTIALS_EXPIRY_ALERT:i.a.t("Credentials expiry alert"),DATA_INTEGRITY:i.a.t("Data integrity"),DATA_SET_NOTIFICATION:i.a.t("Dataset notification"),DATA_STATISTICS:i.a.t("Data statistics"),DATA_SYNC:i.a.t("Data sync"),EVENT_PROGRAMS_DATA_SYNC:i.a.t("Event programs data sync"),FILE_RESOURCE_CLEANUP:i.a.t("File resource clean up"),META_DATA_SYNC:i.a.t("Meta data sync"),MONITORING:i.a.t("Monitoring"),PREDICTOR:i.a.t("Predictor"),PROGRAM_NOTIFICATIONS:i.a.t("Program notifications"),PUSH_ANALYSIS:i.a.t("Push analysis"),REMOVE_EXPIRED_RESERVED_VALUES:i.a.t("Remove expired reserved values"),RESOURCE_TABLE:i.a.t("Resource table"),SEND_SCHEDULED_MESSAGE:i.a.t("Send scheduled message"),TRACKER_PROGRAMS_DATA_SYNC:i.a.t("Tracker programs data sync"),VALIDATION_RESULTS_NOTIFICATION:i.a.t("Validation results notification")};var y={COMPLETED:i.a.t("Completed"),DISABLED:i.a.t("Disabled"),DONE:i.a.t("Done"),FAILED:i.a.t("Failed"),NOT_STARTED:i.a.t("Not started"),RUNNING:i.a.t("Running"),SCHEDULED:i.a.t("Scheduled"),STOPPED:i.a.t("Stopped")};const N={resource:"jobConfigurations",id:({id:e})=>e,type:"update",partial:!0,data:({enabled:e})=>({enabled:e})},{bool:C,string:x}=s.a;var O=({id:e,checked:a})=>{const[t,{loading:o}]=Object(d.d)(N),s=Object(n.useContext)(g),c=!a;return r.a.createElement(l.A,{name:"toggle-job-".concat(e),disabled:o,checked:a,onChange:()=>{t({id:e,enabled:c}).then(()=>s())}})};const{string:S}=s.a;var A=({id:e})=>r.a.createElement(l.o,{dense:!0,onClick:()=>j.push("/edit/".concat(e)),label:i.a.t("Edit")});const I=[{label:i.a.t("Every hour"),value:"0 0 * ? * *"},{label:i.a.t("Every day at midnight"),value:"0 0 1 ? * *"},{label:i.a.t("Every day at 3 am"),value:"0 0 3 ? * *"},{label:i.a.t("Every day at noon"),value:"0 0 12 ? * MON-FRI"},{label:i.a.t("Every week"),value:"0 0 3 ? * MON"}],{func:D}=s.a;var R=({setCron:e,hideModal:a})=>{const[t,o]=Object(n.useState)("");return r.a.createElement(l.p,{open:!0,small:!0,onClose:a},r.a.createElement(l.s,null,i.a.t("Choose a preset time/interval")),r.a.createElement(l.r,null,I.map(e=>r.a.createElement(l.w,Object.assign({},e,{checked:t===e.value,key:e.value,onChange:({value:e})=>o(e)})))),r.a.createElement(l.q,null,r.a.createElement(l.c,{end:!0},r.a.createElement(l.b,{secondary:!0,onClick:a,name:"hide-modal"},i.a.t("Cancel")),r.a.createElement(l.b,{primary:!0,name:"insert-preset",disabled:!t,onClick:()=>{a(),e(t)}},i.a.t("Insert preset")))))};const F={resource:"jobConfigurations",id:({id:e})=>e,type:"delete"},{func:L,string:k}=s.a;var P=({id:e,hideModal:a,onSuccess:t})=>{const[n]=Object(d.d)(F);return r.a.createElement(l.p,{open:!0,small:!0,onClose:a},r.a.createElement(l.r,null,i.a.t("Are you sure you want to delete this job?")),r.a.createElement(l.q,null,r.a.createElement(l.c,{end:!0},r.a.createElement(l.b,{name:"hide-modal",secondary:!0,onClick:a},i.a.t("Cancel")),r.a.createElement(l.b,{name:"delete-job-".concat(e),destructive:!0,onClick:()=>{n({id:e}).then(()=>{a(),t()})}},i.a.t("Delete")))))};const{func:J}=s.a;var H=({hideModal:e})=>r.a.createElement(l.p,{open:!0,small:!0,onClose:e},r.a.createElement(l.r,null,i.a.t("Are you sure you want to discard this form?")),r.a.createElement(l.q,null,r.a.createElement(l.c,{end:!0},r.a.createElement(l.b,{name:"cancel-discard-form",secondary:!0,onClick:e},i.a.t("Cancel")),r.a.createElement(l.b,{name:"discard-form",destructive:!0,onClick:()=>{e(),j.push("/")}},i.a.t("Discard")))));const{func:w,string:B}=s.a;var M=({id:e,hideModal:a})=>{const t=Object(d.c)(),o={jobs:{resource:"jobConfigurations/".concat(e,"/execute")}},s=Object(n.useContext)(g);return r.a.createElement(l.p,{open:!0,small:!0,onClose:a},r.a.createElement(l.r,null,i.a.t("Are you sure you want to run this job?")),r.a.createElement(l.q,null,r.a.createElement(l.c,{end:!0},r.a.createElement(l.b,{name:"hide-modal",secondary:!0,onClick:a},i.a.t("Cancel")),r.a.createElement(l.b,{name:"run-job-".concat(e),primary:!0,onClick:()=>{t.query(o).then(()=>{a(),s()})}},i.a.t("Run")))))};const{string:U}=s.a;var W=({id:e})=>{const[a,t]=Object(n.useState)(!1);return r.a.createElement(r.a.Fragment,null,r.a.createElement(l.o,{dense:!0,onClick:()=>{t(!0)},label:i.a.t("Run manually")}),a&&r.a.createElement(M,{id:e,hideModal:()=>t(!1)}))};const{string:Y}=s.a;var q=({id:e})=>{const[a,t]=Object(n.useState)(!1),o=Object(n.useContext)(g);return r.a.createElement(r.a.Fragment,null,r.a.createElement(l.o,{dense:!0,destructive:!0,onClick:()=>{t(!0)},label:i.a.t("Delete")}),a&&r.a.createElement(P,{id:e,hideModal:()=>t(!1),onSuccess:o}))};const G=({id:e,configurable:a})=>r.a.createElement(l.h,{small:!0,component:r.a.createElement(l.j,null,a&&r.a.createElement(A,{id:e}),r.a.createElement(W,{id:e}),r.a.createElement(q,{id:e}))},i.a.t("Actions"));G.defaultProps={configurable:!1};const{string:V,bool:z}=s.a;var X=G;const{string:K}=s.a;var Z=({status:e})=>{switch(e){case"STOPPED":case"DISABLED":return r.a.createElement(l.J,null,y[e]);case"RUNNING":case"NOT_STARTED":case"SCHEDULED":return r.a.createElement(l.J,{neutral:!0},y[e]);case"FAILED":return r.a.createElement(l.J,{negative:!0},y[e]);case"DONE":return r.a.createElement(l.J,{positive:!0},y[e]);default:return null}},Q=t(28),$=t.n(Q);const ee=({nextExecutionTime:e,enabled:a})=>{if(!a||!e)return"-";const t=$()(Date.now()),n=$.a.utc(e);return n.isSameOrBefore(t,"minute")?i.a.t("Not scheduled"):t.to(n)},{bool:ae,string:te}=s.a;ee.propTypes={enabled:ae.isRequired,nextExecutionTime:te};var ne=ee,re=t(201),le=t.n(re);const oe=["MON","TUE","WED","THU","FRI","SAT","SUN"],se=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],ce=(e,a,t)=>e>=a&&e<=t,ie=e=>"*"===e,de=e=>"?"===e,me=(e,a,t)=>ie(e)||ce(e,a,t)||((e,a,t)=>{const n=e.split("-");return!(!n||2!==n.length)&&(ce(n[0],a,t)&&ce(n[1],a,t)&&n[0]<=n[1])})(e,a,t)||((e,a,t)=>{const n=e.split("/");return!(!n||2!==n.length)&&((ie(n[0])||ce(n[0],a,t))&&ce(n[1],a,t))})(e,a,t),ue=e=>me(e,1,12)||(e=>{const a=e.split("-"),[t,n]=a.map(e=>se.indexOf(e));return-1!==t&&void 0===n||-1!==t&&-1!==n&&t<=n})(e),Ee=e=>me(e,1,7)||(e=>{const a=e.split("-"),[t,n]=a.map(e=>oe.indexOf(e));return-1!==t&&void 0===n||-1!==t&&-1!==n&&t<=n})(e)||de(e);var be=e=>{if(!e)return!1;const a=e.trim().split(" ");return!!(e=>e&&6===e.length)(a)&&(t=a[0],me(t,0,59)&&(e=>me(e,0,59))(a[1])&&(e=>me(e,0,23))(a[2])&&(e=>me(e,0,31)||de(e))(a[3])&&ue(a[4])&&Ee(a[5]));var t};var pe=e=>"string"===typeof e&&e.length>0?be(e)?void 0:i.a.t("Please enter a valid CRON expression"):i.a.t("A CRON expression is required");var ge=e=>{const a=i.a.language||"en";return e&&be(e)?le.a.toString(e,{locale:a}):""};const he=({cronExpression:e,schedulingType:a,delay:t})=>{switch(a){case"CRON":return ge(e);case"FIXED_DELAY":return i.a.t("{{ delay }} seconds after last run",{delay:t});default:return"-"}},{string:_e,number:fe}=s.a;he.propTypes={schedulingType:_e.isRequired,cronExpression:_e,delay:fe};var je=he;const{shape:ve,string:Te,bool:ye,number:Ne}=s.a;var Ce=({job:{id:e,displayName:a,jobType:t,cronExpression:n,delay:o,jobStatus:s,nextExecutionTime:c,schedulingType:i,enabled:d,configurable:m}})=>r.a.createElement(l.H,null,r.a.createElement(l.E,null,a),r.a.createElement(l.E,null,T[t]),r.a.createElement(l.E,null,r.a.createElement(je,{cronExpression:n,delay:o,schedulingType:i})),r.a.createElement(l.E,null,r.a.createElement(ne,{nextExecutionTime:c,enabled:d})),r.a.createElement(l.E,null,r.a.createElement(Z,{status:s})),r.a.createElement(l.E,null,r.a.createElement(O,{id:e,checked:d})),r.a.createElement(l.E,null,r.a.createElement(X,{id:e,configurable:m})));const{object:xe,arrayOf:Oe,string:Se}=s.a;var Ae=({jobIds:e,jobEntities:a})=>r.a.createElement(l.C,null,r.a.createElement(l.G,null,r.a.createElement(l.I,null,r.a.createElement(l.F,null,i.a.t("Job name")),r.a.createElement(l.F,null,i.a.t("Type")),r.a.createElement(l.F,null,i.a.t("Schedule")),r.a.createElement(l.F,null,i.a.t("Next run")),r.a.createElement(l.F,null,i.a.t("Status")),r.a.createElement(l.F,null,i.a.t("On/off")),r.a.createElement(l.F,null))),r.a.createElement(l.D,null,0===e.length?r.a.createElement(l.H,null,r.a.createElement(l.E,null,i.a.t("No jobs to display"))):e.map(e=>r.a.createElement(Ce,{key:e,job:a[e]})))),Ie=t(203),De=t.n(Ie);const{bool:Re,object:Fe,string:Le,arrayOf:ke,func:Pe}=s.a;var Je=({jobIds:e,jobEntities:a,isLoading:t,showSystemJobs:n,setShowSystemJobs:o,jobFilter:s,setJobFilter:c})=>r.a.createElement(r.a.Fragment,null,r.a.createElement("header",{className:De.a.header},r.a.createElement("h1",{className:De.a.headerTitle},i.a.t("Scheduled jobs")),r.a.createElement("a",{href:"https://docs.dhis2.org/master/en/user/html/dataAdmin_scheduling.html#dataAdmin_scheduling_config",className:De.a.headerLink,target:"_blank",rel:"noopener noreferrer"},r.a.createElement("span",{className:De.a.headerLinkIcon},r.a.createElement(l.k,null)),i.a.t("About job configuration"))),r.a.createElement(l.d,null,r.a.createElement("div",{className:De.a.controlContainer},r.a.createElement(l.l,{dataTest:"job-filter-input",placeholder:i.a.t("Filter jobs"),onChange:({value:e})=>{c(e)},value:s}),r.a.createElement("div",{className:De.a.controlRight},r.a.createElement(l.A,{dataTest:"job-toggle-switch",checked:n,disabled:t,label:i.a.t("Show system jobs"),onChange:({checked:e})=>{o(e)}}),r.a.createElement(l.b,{dataTest:"new-job-button",onClick:()=>{j.push("/add")}},i.a.t("New job")))),r.a.createElement(Ae,{jobIds:e,jobEntities:a})));const He={jobs:{resource:"jobConfigurations",params:{fields:"*",paging:!1}}};var we=()=>{const{loading:e,error:a,data:t,refetch:o}=Object(d.e)(He),[s,c]=Object(n.useState)(!1),[i,m]=Object(n.useState)("");if(e)return r.a.createElement(l.n,null,r.a.createElement(l.e,null,r.a.createElement(l.f,null)));if(a)throw a;const u=t.jobs.jobConfigurations,E=((e,a)=>e.filter(e=>e.name.toLowerCase().includes(a.toLowerCase())))(u,i),b=_(s?E:(e=>e.filter(e=>e.configurable))(E));return r.a.createElement(g.Provider,{value:o},r.a.createElement(Je,{jobIds:b,jobEntities:h(u),isLoading:e,showSystemJobs:s,setShowSystemJobs:c,jobFilter:i,setJobFilter:m}))};const Be=({setCron:e,small:a})=>{const[t,o]=Object(n.useState)(!1);return r.a.createElement(r.a.Fragment,null,r.a.createElement(l.b,{onClick:()=>o(!0),small:a},i.a.t("Choose from preset times")),t&&r.a.createElement(R,{hideModal:()=>o(!1),setCron:e}))};Be.defaultProps={small:!1};const{func:Me,bool:Ue}=s.a;var We=Be;const{string:Ye,func:qe}=s.a;var Ge=({id:e,onSuccess:a})=>{const[t,o]=Object(n.useState)(!1);return r.a.createElement(r.a.Fragment,null,r.a.createElement(l.b,{destructive:!0,onClick:()=>o(!0)},i.a.t("Delete job")),t&&r.a.createElement(P,{id:e,hideModal:()=>o(!1),onSuccess:a}))};const Ve=({shouldConfirm:e,children:a,small:t,className:o})=>{const[s,c]=Object(n.useState)(!1),i=e?()=>c(!0):()=>j.push("/");return r.a.createElement(r.a.Fragment,null,r.a.createElement(l.b,{onClick:i,small:t,className:o},a),s&&r.a.createElement(H,{hideModal:()=>c(!1)}))};Ve.defaultProps={className:"",shouldConfirm:!1,small:!1};const{string:ze,bool:Xe}=s.a;var Ke=Ve;const{FORM_ERROR:Ze}=l.i;var Qe=e=>{const{details:{response:a}}=e,t={},n=[];return a.errorReports&&a.errorReports.length&&a.errorReports.forEach(e=>{e.errorProperty?t[e.errorProperty]=e.message:n.push(e.message)}),n.length>0&&(t[Ze]=n),t};const $e={resource:"jobConfigurations",type:"create",data:({job:e})=>e};var ea=()=>{const e=Object(d.c)();return[a=>e.mutate($e,{variables:{job:a}}).then(()=>{j.push("/")}).catch(e=>{if("access"===e.type)return Qe(e);throw e})]};const aa={resource:"jobConfigurations",type:"update",id:({id:e})=>e,data:({job:e})=>e};var ta=({id:e})=>{const a=Object(d.c)();return[t=>a.mutate(aa,{variables:{job:t,id:e}}).then(()=>{j.push("/")}).catch(e=>{if("access"===e.type)return Qe(e);throw e})]},na=t(204),ra=t.n(na);const{array:la}=s.a;var oa=({submitError:e})=>e.length>0?r.a.createElement(l.v,{error:!0,title:i.a.t("Something went wrong whilst creating your job")},r.a.createElement("ul",{className:ra.a.list},e.map(e=>r.a.createElement("li",{key:e},e)))):null;const{Field:sa}=l.x,ca=Object(l.K)(l.O,l.M);var ia=()=>r.a.createElement(sa,{name:"name",component:l.m,validate:ca,label:i.a.t("Name"),type:"text",required:!0});const{Field:da}=l.x,ma=Object(l.K)(l.O,l.M),ua={jobTypes:{resource:"jobConfigurations/jobTypes"}};var Ea=()=>{const{loading:e,error:a,data:t}=Object(d.e)(ua);if(e)return r.a.createElement(l.y,{loading:!0,loadingText:i.a.t("Loading"),label:i.a.t("Job type"),required:!0});if(a)throw a;const n=t.jobTypes.jobTypes.map(({jobType:e})=>({value:e,label:T[e]}));return r.a.createElement(da,{name:"jobType",validate:ma,component:l.z,options:n,label:i.a.t("Job type"),required:!0})};const ba=(e,a)=>e.find(e=>e.jobType===a),pa=e=>"number"===typeof e?e.toString():e,{Field:ga}=l.x,ha={options:{resource:"/",id:({id:e})=>e,params:{paging:!1}}},{string:_a}=s.a;var fa=({endpoint:e,label:a,name:t})=>{const{loading:n,error:o,data:s}=Object(d.e)(ha,{variables:{id:e}});if(n)return r.a.createElement(l.t,{loading:!0,label:a});if(o)throw o;if(0===s.options.length)return r.a.createElement(l.t,{disabled:!0,helpText:i.a.t("No options available"),label:a});const c=s.options.map(e=>({value:e,label:e}));return r.a.createElement(ga,{name:t,component:l.u,options:c,label:a})};const{Field:ja}=l.x,va={options:{resource:"/",id:({id:e})=>e,params:{paging:!1}}},{string:Ta}=s.a;var ya=({endpoint:e,label:a,name:t})=>{const{loading:n,error:o,data:s}=Object(d.e)(va,{variables:{id:e}});if(n)return r.a.createElement(l.t,{loading:!0,label:a});if(o)throw o;if(0===s.options.length)return r.a.createElement(l.t,{disabled:!0,helpText:i.a.t("No options available"),label:a});const c=s.options.map(e=>({value:e,label:v[e]||e}));return r.a.createElement(ja,{name:t,component:l.u,options:c,label:a})};const{Field:Na}=l.x,Ca={options:{resource:"/",id:({id:e})=>e,params:{paging:!1}}},{string:xa}=s.a;var Oa=({endpoint:e,label:a,name:t,parameterName:n})=>{const{loading:o,error:s,data:c}=Object(d.e)(Ca,{variables:{id:e}});if(o)return r.a.createElement(l.t,{loading:!0,label:a});if(s)throw s;if(!(n in c.options)||0===c.options[n].length)return r.a.createElement(l.t,{disabled:!0,helpText:i.a.t("No options available"),label:a});const m=c.options[n].map(({id:e,displayName:a})=>({value:e,label:a}));return r.a.createElement(Na,{name:t,component:l.u,options:m,label:a})},Sa=t(205),Aa=t.n(Sa);const{Field:Ia}=l.x,Da={jobTypes:{resource:"jobConfigurations/jobTypes"}},{string:Ra}=s.a;var Fa=({jobType:e})=>{const{loading:a,error:t,data:n}=Object(d.e)(Da);if(a)return null;if(t)throw t;const o=((e,a)=>{const t=ba(e,a);return"jobParameters"in t?t.jobParameters:[]})(n.jobTypes.jobTypes,e);if(0===o.length)return null;const s=o.map(({fieldName:e,name:a,klass:t,relativeApiEndpoint:n})=>{const o={label:e,name:"".concat("jobParameters",".").concat(a)},s=(e=>e&&e.startsWith("/api/")?e.slice(5):e)(n);let c=null;if("skipTableTypes"===a)return r.a.createElement(l.a,{marginTop:"16px",key:a},r.a.createElement(ya,Object.assign({},o,{endpoint:s})));switch(t){case"java.lang.String":c=r.a.createElement(Ia,Object.assign({},o,{component:l.m,type:"text"}));break;case"java.lang.Boolean":c=r.a.createElement(Ia,Object.assign({},o,{component:l.B,type:"checkbox"}));break;case"java.lang.Integer":c=r.a.createElement(Ia,Object.assign({},o,{component:l.m,format:pa,type:"number"}));break;case"java.util.Set":c=r.a.createElement(fa,Object.assign({},o,{endpoint:s}));break;case"java.util.List":c=r.a.createElement(Oa,Object.assign({},o,{parameterName:a,endpoint:s}))}return r.a.createElement(l.a,{marginTop:"16px",key:a},c)});return r.a.createElement(r.a.Fragment,null,r.a.createElement("header",null,r.a.createElement("h4",{className:Aa.a.headerTitle},i.a.t("Parameters"))),s)};const{Field:La,useFormState:ka,useForm:Pa}=l.x,Ja=pe;var Ha=()=>{const e=Pa(),{values:a}=ka({subscription:{values:!0}}),t=a.cronExpression,n=ge(t);return r.a.createElement(r.a.Fragment,null,r.a.createElement(La,{component:l.m,name:"cronExpression",validate:Ja,label:i.a.t("CRON Expression"),type:"text",helpText:n,required:!0}),r.a.createElement(l.a,{marginTop:"8px"},r.a.createElement(We,{setCron:a=>e.change("cronExpression",a),small:!0})))};const{Field:wa}=l.x,Ba=Object(l.K)(l.N,l.M,Object(l.L)(1,86400));var Ma=()=>r.a.createElement(wa,{component:l.m,name:"delay",validate:Ba,label:i.a.t("Delay"),type:"number",format:pa,helpText:i.a.t("Delay in seconds ({{ LOWERBOUND }} - {{ UPPERBOUND }})",{LOWERBOUND:1,UPPERBOUND:86400}),required:!0});const Ua={jobTypes:{resource:"jobConfigurations/jobTypes"}},{string:Wa}=s.a;var Ya=({jobType:e})=>{const{loading:a,error:t,data:n}=Object(d.e)(Ua);if(a)return null;if(t)throw t;switch(ba(n.jobTypes.jobTypes,e).schedulingType){case"CRON":return r.a.createElement(Ha,null);case"FIXED_DELAY":return r.a.createElement(Ma,null);default:return null}};const qa="jobType";var Ga=t(206),Va=t.n(Ga);const{useForm:za}=l.x,Xa=({handleSubmit:e,pristine:a,submitting:t,submitError:o,hasSubmitErrors:s,values:c,setIsPristine:d})=>{const{subscribe:m}=za();Object(n.useEffect)(()=>{m(({pristine:e})=>d(e),{pristine:!0})});const u=c[qa],E=t?r.a.createElement(l.f,{small:!0}):null;return r.a.createElement("form",{onSubmit:e},r.a.createElement(l.a,{maxWidth:"600px"},r.a.createElement(ia,null)),r.a.createElement(l.a,{marginTop:"16px",maxWidth:"400px"},r.a.createElement(Ea,null)),u&&r.a.createElement(l.a,{marginTop:"16px",maxWidth:"400px"},r.a.createElement(Ya,{jobType:u})),u&&r.a.createElement(l.a,{marginTop:"32px",maxWidth:"400px"},r.a.createElement(Fa,{jobType:u})),s&&r.a.createElement(l.a,{marginTop:"32px",maxWidth:"600px"},r.a.createElement(oa,{submitError:o})),r.a.createElement("div",{className:Va.a.formButtonContainer},r.a.createElement(l.b,{primary:!0,type:"submit",disabled:a||t,icon:E,className:Va.a.saveButton},i.a.t("Save")),r.a.createElement(Ke,{shouldConfirm:!a},i.a.t("Cancel"))))},{func:Ka,bool:Za,object:Qa,array:$a}=s.a;Xa.defaultProps={submitError:[]};var et=Xa;const{Form:at}=l.x,{func:tt}=s.a;var nt=({setIsPristine:e})=>{const[a]=ea();return r.a.createElement(at,{onSubmit:a,component:et,setIsPristine:e,destroyOnUnregister:!0})},rt=t(207),lt=t.n(rt);const{useForm:ot}=l.x,st=({id:e,handleSubmit:a,pristine:t,submitting:o,submitError:s,hasSubmitErrors:c,values:d,setIsPristine:m})=>{const{subscribe:u}=ot();Object(n.useEffect)(()=>{u(({pristine:e})=>m(e),{pristine:!0})});const E=d[qa],b=o?r.a.createElement(l.f,{small:!0}):null;return r.a.createElement("form",{onSubmit:a},r.a.createElement(l.a,{maxWidth:"600px"},r.a.createElement(ia,null)),r.a.createElement(l.a,{marginTop:"16px",maxWidth:"400px"},r.a.createElement(Ea,null)),E&&r.a.createElement(l.a,{marginTop:"16px",maxWidth:"400px"},r.a.createElement(Ya,{jobType:E})),E&&r.a.createElement(l.a,{marginTop:"32px",maxWidth:"400px"},r.a.createElement(Fa,{jobType:E})),c&&r.a.createElement(l.a,{marginTop:"32px",maxWidth:"600px"},r.a.createElement(oa,{submitError:s})),r.a.createElement("div",{className:lt.a.formButtonContainer},r.a.createElement(l.b,{primary:!0,type:"submit",disabled:t||o,icon:b,className:lt.a.saveButton},i.a.t("Save")),r.a.createElement(Ke,{shouldConfirm:!t},i.a.t("Cancel")),r.a.createElement("span",{className:lt.a.deleteButton},r.a.createElement(Ge,{id:e,onSuccess:()=>j.push("/")}))))},{func:ct,bool:it,object:dt,array:mt,string:ut}=s.a;st.defaultProps={submitError:[]};var Et=st;const{Form:bt}=l.x,pt={job:{resource:"jobConfigurations",id:({id:e})=>e,params:{paging:!1,fields:["cronExpression","delay","jobParameters","jobType","name","schedulingType"].join(",")}}},{func:gt}=s.a;var ht=({setIsPristine:e})=>{const{id:a}=Object(o.c)(),{loading:t,error:n,data:l}=Object(d.e)(pt,{variables:{id:a}}),[s]=ta({id:a});if(t)return null;if(n)throw n;return r.a.createElement(bt,{onSubmit:s,component:Et,setIsPristine:e,initialValues:l.job,id:a,destroyOnUnregister:!0})},_t=t(214),ft=t.n(_t);const{string:jt}=s.a;var vt=({created:e,lastExecutedStatus:a,lastExecuted:t})=>{const n=Date.now(),l=$()(e).from(n),o=y[a],s=t?$()(t).from(n):"";return r.a.createElement("div",{className:ft.a.wrapper},r.a.createElement("h4",{className:ft.a.title},i.a.t("Job details")),r.a.createElement("div",{className:ft.a.details},r.a.createElement("div",null,i.a.t("Created {{ createdFromNow }}.",{createdFromNow:l})),s&&r.a.createElement("div",null,i.a.t("Last run {{ lastRunFromNow }}.",{lastRunFromNow:s})),o&&r.a.createElement("div",null,i.a.t("Last run status: {{ translatedStatus }}.",{translatedStatus:o,nsSeparator:">"}))))},Tt=t(215),yt=t.n(Tt);const{bool:Nt,func:Ct,string:xt}=s.a;var Ot=({isPristine:e,setIsPristine:a,name:t,created:n,lastExecutedStatus:o,lastExecuted:s})=>r.a.createElement(r.a.Fragment,null,r.a.createElement("header",{className:yt.a.pageHeader},r.a.createElement(Ke,{shouldConfirm:!e,className:yt.a.pageHeaderButton,small:!0},i.a.t("Back to all jobs")),r.a.createElement("h2",{className:yt.a.pageHeaderTitle},i.a.t("Job: {{ name }}",{name:t,nsSeparator:">"}))),r.a.createElement(l.d,{className:yt.a.card},r.a.createElement("header",{className:yt.a.cardHeader},r.a.createElement("h3",{className:yt.a.cardHeaderTitle},i.a.t("Configuration")),r.a.createElement("a",{href:"https://docs.dhis2.org/master/en/user/html/dataAdmin_scheduling.html#dataAdmin_scheduling_config",className:yt.a.cardHeaderLink,target:"_blank",rel:"noopener noreferrer"},r.a.createElement("span",{className:yt.a.cardHeaderInfo},r.a.createElement(l.k,null)),i.a.t("About job configuration"))),r.a.createElement("div",{className:yt.a.jobDetails},r.a.createElement(vt,{created:n,lastExecutedStatus:o,lastExecuted:s})),r.a.createElement(ht,{setIsPristine:a})));const St={job:{resource:"jobConfigurations",id:({id:e})=>e,params:{paging:!1}}};var At=()=>{const[e,a]=Object(n.useState)(!0),{id:t}=Object(o.c)(),{loading:s,error:c,data:i}=Object(d.e)(St,{variables:{id:t}});if(s)return r.a.createElement(l.n,null,r.a.createElement(l.e,null,r.a.createElement(l.f,null)));if(c)throw c;return r.a.createElement(Ot,{isPristine:e,setIsPristine:a,name:i.job.name,created:i.job.created,lastExecutedStatus:i.job.lastExecutedStatus,lastExecuted:i.job.lastExecuted})},It=t(216),Dt=t.n(It);const{bool:Rt,func:Ft}=s.a;var Lt=({isPristine:e,setIsPristine:a})=>r.a.createElement(r.a.Fragment,null,r.a.createElement("header",{className:Dt.a.pageHeader},r.a.createElement(Ke,{shouldConfirm:!e,className:Dt.a.pageHeaderButton,small:!0},i.a.t("Back to all jobs")),r.a.createElement("h2",{className:Dt.a.pageHeaderTitle},i.a.t("New Job"))),r.a.createElement(l.d,{className:Dt.a.card},r.a.createElement("header",{className:Dt.a.cardHeader},r.a.createElement("h3",{className:Dt.a.cardHeaderTitle},i.a.t("Configuration")),r.a.createElement("a",{href:"https://docs.dhis2.org/master/en/user/html/dataAdmin_scheduling.html#dataAdmin_scheduling_config",className:Dt.a.cardHeaderLink,target:"_blank",rel:"noopener noreferrer"},r.a.createElement("span",{className:Dt.a.cardHeaderInfo},r.a.createElement(l.k,null)),i.a.t("About job configuration"))),r.a.createElement(nt,{setIsPristine:a})));var kt=()=>{const[e,a]=Object(n.useState)(!0);return r.a.createElement(Lt,{isPristine:e,setIsPristine:a})};var Pt=()=>r.a.createElement(o.b,{history:j},r.a.createElement(p,null,r.a.createElement(o.a,{exact:!0,path:"/",component:we}),r.a.createElement(o.a,{path:"/edit/:id",component:At}),r.a.createElement(o.a,{path:"/add",component:kt}))),Jt=t(217),Ht=t.n(Jt);const{node:wt}=s.a;var Bt=({children:e})=>r.a.createElement("div",{className:Ht.a.wrapper},e);t(218);var Mt=()=>r.a.createElement(r.a.Fragment,null,r.a.createElement(l.g,{spacers:!0,colors:!0}),r.a.createElement(Bt,null,r.a.createElement(Pt,null)));t.d(a,"default",(function(){return Mt}))}}]);
//# sourceMappingURL=app.3dc4d0e9.chunk.js.map